<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>UpdateBookNVirnStatusHelper.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">lms</a> &gt; <a href="index.source.html" class="el_package">com.skilrock.lms.coreEngine.scratchService.inventoryMgmt.common</a> &gt; <span class="el_source">UpdateBookNVirnStatusHelper.java</span></div><h1>UpdateBookNVirnStatusHelper.java</h1><pre class="source lang-java linenums">package com.skilrock.lms.coreEngine.scratchService.inventoryMgmt.common;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.sql.Timestamp;
import java.util.ArrayList;
import java.util.Date;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.Set;
import java.util.TreeMap;
import java.util.TreeSet;

import com.skilrock.lms.beans.BookSeriesBean;
import com.skilrock.lms.beans.GameTicketFormatBean;
import com.skilrock.lms.common.db.DBConnect;
import com.skilrock.lms.common.exception.LMSException;
import com.skilrock.lms.common.utility.MD5Encoder;

<span class="nc" id="L29">public class UpdateBookNVirnStatusHelper {</span>

	// fetch the game details for PWT on Retailer End
	public String fetchPwtGameDetails() throws LMSException {
<span class="nc" id="L33">		Connection connection = DBConnect.getConnection();</span>
		try {

<span class="nc" id="L36">			StringBuilder nbrFormat = new StringBuilder();</span>
<span class="nc" id="L37">			Statement stmt1 = connection.createStatement();</span>
<span class="nc" id="L38">			String fetchGameDetailsQuery = &quot;select res.game_name,res.game_nbr,res.game_id, sgtnf.pack_nbr_digits,&quot;</span>
					+ &quot; sgtnf.book_nbr_digits,sgtnf.ticket_nbr_digits,sgtnf.game_nbr_digits,sgtnf.game_virn_digits&quot;
					+ &quot; from st_se_game_ticket_nbr_format sgtnf,(select game_name,game_nbr,game_id from st_se_game_master )&quot;
					+ &quot; res where sgtnf.game_id = res.game_id&quot;;
<span class="nc" id="L42">			ResultSet result = stmt1.executeQuery(fetchGameDetailsQuery);</span>
<span class="nc" id="L43">			boolean flag = false;</span>
<span class="nc bnc" id="L44" title="All 2 branches missed.">			while (result.next()) {</span>
<span class="nc" id="L45">				nbrFormat.append(&quot;Nx*&quot; + result.getString(&quot;game_id&quot;) + &quot;:&quot;);</span>
<span class="nc" id="L46">				nbrFormat.append(result.getString(&quot;game_nbr&quot;) + &quot;:&quot;);</span>
<span class="nc" id="L47">				nbrFormat.append(result.getString(&quot;game_name&quot;) + &quot;:&quot;);</span>
<span class="nc" id="L48">				nbrFormat.append(result.getInt(&quot;pack_nbr_digits&quot;) + &quot;:&quot;);</span>
<span class="nc" id="L49">				nbrFormat.append(result.getInt(&quot;book_nbr_digits&quot;) + &quot;:&quot;);</span>
<span class="nc" id="L50">				nbrFormat.append(result.getInt(&quot;ticket_nbr_digits&quot;) + &quot;:&quot;);</span>
<span class="nc" id="L51">				nbrFormat.append(result.getInt(&quot;game_nbr_digits&quot;) + &quot;:&quot;);</span>
				// nbrFormat.append(result.getInt(&quot;game_virn_digits&quot;));
<span class="nc" id="L53">				flag = true;</span>
			}
<span class="nc" id="L55">			System.out.println(&quot;result of pwt &quot; + nbrFormat.toString());</span>
<span class="nc" id="L56">			String nbrFormatStr = &quot;&quot;;</span>
<span class="nc bnc" id="L57" title="All 2 branches missed.">			if (flag) {</span>
<span class="nc" id="L58">				nbrFormatStr = nbrFormat.delete(0, 3).toString();</span>
			}
<span class="nc" id="L60">			System.out.println(&quot;returned string = &quot; + nbrFormatStr);</span>
<span class="nc" id="L61">			return nbrFormatStr;</span>
<span class="nc" id="L62">		} catch (SQLException e) {</span>
<span class="nc" id="L63">			e.printStackTrace();</span>
<span class="nc" id="L64">			throw new LMSException(e);</span>
<span class="nc" id="L65">		} catch (Exception e) {</span>
<span class="nc" id="L66">			e.printStackTrace();</span>
<span class="nc" id="L67">			throw new LMSException(e);</span>
		} finally {
<span class="nc" id="L69">			try {</span>
<span class="nc" id="L70">				connection.close();</span>
<span class="nc" id="L71">			} catch (SQLException e) {</span>
<span class="nc" id="L72">				e.printStackTrace();</span>
<span class="nc" id="L73">				throw new LMSException(e);</span>
<span class="nc" id="L74">			}</span>
		}
	}

	public Map fetchValidBookList(int gameId, int gameNbrDigits,
			int packNbrDigits, int bookNbrDigits, int noOfBkPerPack,
			String[] bookNo, String[] bookSeriesFrom, String[] bookSeriesTo,
			String[] packNo, String[] packSeriesFrom, String[] packSeriesTo,
			String statusType, Connection connection) throws LMSException {
		try {
<span class="nc" id="L84">			Map bookMap = new TreeMap();</span>

			// Set&lt;String&gt; validBooks = new TreeSet&lt;String&gt;();
<span class="nc" id="L87">			Map&lt;String, String&gt; validBooks = new TreeMap&lt;String, String&gt;();</span>
<span class="nc" id="L88">			Set&lt;String&gt; inValidBooks = new TreeSet&lt;String&gt;();</span>
<span class="nc" id="L89">			Set&lt;String&gt; invalidPacks = new TreeSet&lt;String&gt;();</span>
<span class="nc" id="L90">			List&lt;BookSeriesBean&gt; invalidBkSerList = new ArrayList&lt;BookSeriesBean&gt;();</span>
<span class="nc" id="L91">			List&lt;BookSeriesBean&gt; invalidPkSerList = new ArrayList&lt;BookSeriesBean&gt;();</span>

<span class="nc" id="L93">			ResultSet rs = null;</span>
<span class="nc" id="L94">			boolean flag = false;</span>
			// verify books
<span class="nc bnc" id="L96" title="All 4 branches missed.">			if (bookNo != null &amp;&amp; bookNo.length &gt; 0) {</span>
<span class="nc bnc" id="L97" title="All 2 branches missed.">				for (int i = 0, l = bookNo.length; i &lt; l; i++) {</span>
<span class="nc bnc" id="L98" title="All 2 branches missed.">					if (!&quot;&quot;.equals(bookNo[i].trim())) {</span>
<span class="nc" id="L99">						flag = isBookFormatValid(bookNo[i], gameNbrDigits,</span>
								packNbrDigits, bookNbrDigits, gameId,
								noOfBkPerPack, connection);
<span class="nc bnc" id="L102" title="All 2 branches missed.">						if (flag) {</span>
<span class="nc" id="L103">							validBooks.put(bookNo[i], &quot;&quot;);</span>
						} else {
<span class="nc" id="L105">							inValidBooks.add(bookNo[i]);</span>
						}
					}
				}
			}
<span class="nc" id="L110">			System.out.println(&quot;invalid books : &quot; + inValidBooks</span>
					+ &quot;\nvalid books : &quot; + validBooks);
<span class="nc" id="L112">			String bookNbrStr = validBooks.keySet().toString()</span>
					.replace(&quot;[&quot;, &quot;'&quot;).replace(&quot;]&quot;, &quot;'&quot;).replace(&quot;, &quot;, &quot;','&quot;);
<span class="nc" id="L114">			System.out.println(&quot;invalid books : &quot; + inValidBooks</span>
					+ &quot;\nvalid books : &quot; + validBooks + &quot;bookNbrStr&quot;
					+ bookNbrStr);
<span class="nc" id="L117">			String fetchBookQuery = &quot;select book_nbr, current_owner, book_status from st_se_game_inv_status where book_nbr in (&quot;</span>
					+ bookNbrStr + &quot;) &quot;;
<span class="nc" id="L119">			PreparedStatement bookPstmt = connection</span>
					.prepareStatement(fetchBookQuery);
<span class="nc bnc" id="L121" title="All 4 branches missed.">			if (bookNo != null &amp;&amp; bookNo.length &gt; 0) {</span>
<span class="nc bnc" id="L122" title="All 2 branches missed.">				for (int i = 0, l = bookNo.length; i &lt; l; i++) {</span>
<span class="nc bnc" id="L123" title="All 2 branches missed.">					if (!&quot;&quot;.equals(bookNo[i].trim())) {</span>
<span class="nc" id="L124">						rs = bookPstmt.executeQuery();</span>
<span class="nc bnc" id="L125" title="All 2 branches missed.">						while (rs.next()) {</span>
<span class="nc bnc" id="L126" title="All 2 branches missed.">							if (!&quot;CLAIMED&quot;.equalsIgnoreCase(rs</span>
									.getString(&quot;book_status&quot;))) {
<span class="nc" id="L128">								validBooks.put(rs.getString(&quot;book_nbr&quot;), rs</span>
										.getString(&quot;current_owner&quot;));
							} else {
<span class="nc" id="L131">								inValidBooks.add(rs.getString(&quot;book_nbr&quot;));</span>
<span class="nc" id="L132">								validBooks.remove(rs.getString(&quot;book_nbr&quot;));</span>
							}
						}

					}
				}
			}

			// verify book series
<span class="nc" id="L141">			boolean statusTypeFlag = true;</span>
<span class="nc bnc" id="L142" title="All 2 branches missed.">			if (&quot;ACTIVATE&quot;.equalsIgnoreCase(statusType.trim())) {</span>
<span class="nc" id="L143">				statusTypeFlag = false;</span>
			}

<span class="nc" id="L146">			String fetchBookSerListQuery = &quot;select book_nbr, current_owner, book_status from st_se_game_inv_status where book_nbr between ? and ? &quot;;</span>
<span class="nc" id="L147">			PreparedStatement bookSerPstmt = connection</span>
					.prepareStatement(fetchBookSerListQuery);
<span class="nc" id="L149">			BookSeriesBean serBean = null;</span>
<span class="nc" id="L150">			String fromArr[] = null, toArr[] = null;</span>
<span class="nc" id="L151">			int totBooks = 0;</span>
<span class="nc bnc" id="L152" title="All 8 branches missed.">			if (bookSeriesFrom != null &amp;&amp; bookSeriesTo != null</span>
					&amp;&amp; bookSeriesFrom.length &gt; 0 &amp;&amp; bookSeriesTo.length &gt; 0) {
<span class="nc" id="L154">				for (int i = 0, l = bookSeriesFrom.length, k = bookSeriesTo.length; i &lt; l</span>
<span class="nc bnc" id="L155" title="All 4 branches missed.">						&amp;&amp; i &lt; k; i++) {</span>
<span class="nc bnc" id="L156" title="All 4 branches missed.">					if (!&quot;&quot;.equals(bookSeriesFrom[i].trim())</span>
							&amp;&amp; !&quot;&quot;.equals(bookSeriesTo[i].trim())) {
<span class="nc" id="L158">						serBean = new BookSeriesBean();</span>
<span class="nc" id="L159">						serBean.setBookNbrFrom(bookSeriesFrom[i]);</span>
<span class="nc" id="L160">						serBean.setBookNbrTo(bookSeriesTo[i]);</span>
<span class="nc" id="L161">						serBean.setStatus(&quot;Book Series is Not Valid&quot;);</span>

<span class="nc" id="L163">						bookSerPstmt.setString(1, bookSeriesFrom[i]);</span>
<span class="nc" id="L164">						bookSerPstmt.setString(2, bookSeriesTo[i]);</span>
<span class="nc" id="L165">						System.out.println(&quot;bookSerPstmt = &quot; + bookSerPstmt);</span>
<span class="nc" id="L166">						rs = bookSerPstmt.executeQuery();</span>

<span class="nc" id="L168">						fromArr = bookSeriesFrom[i].split(&quot;-&quot;);</span>
<span class="nc" id="L169">						toArr = bookSeriesTo[i].split(&quot;-&quot;);</span>
<span class="nc" id="L170">						totBooks = Integer.parseInt(toArr[1])</span>
								- Integer.parseInt(fromArr[1]) + 1;
<span class="nc" id="L172">						rs.last(); // note 1</span>
<span class="nc" id="L173">						int size = rs.getRow(); // note 2</span>
<span class="nc" id="L174">						rs.beforeFirst(); // note 3</span>

<span class="nc" id="L176">						boolean pkflag = false;</span>
<span class="nc bnc" id="L177" title="All 2 branches missed.">						System.out.println(&quot;totBooks= = &quot; + totBooks</span>
								+ &quot;, rs.getFetchSize()=&quot; + size
								+ &quot; condition = &quot; + (totBooks == size));
<span class="nc bnc" id="L180" title="All 2 branches missed.">						if (totBooks == size) {</span>
<span class="nc bnc" id="L181" title="All 2 branches missed.">							while (rs.next()) {</span>
<span class="nc bnc" id="L182" title="All 2 branches missed.">								if (!&quot;CLAIMED&quot;.equalsIgnoreCase(rs</span>
										.getString(&quot;book_status&quot;))) {
<span class="nc" id="L184">									validBooks.put(rs.getString(&quot;book_nbr&quot;), rs</span>
											.getString(&quot;current_owner&quot;));
<span class="nc" id="L186">									pkflag = false;</span>
								} else {
<span class="nc" id="L188">									inValidBooks.add(rs.getString(&quot;book_nbr&quot;));</span>

								}
							}
<span class="nc bnc" id="L192" title="All 2 branches missed.">							if (pkflag) {</span>
<span class="nc" id="L193">								invalidBkSerList.add(serBean);</span>
							}
						} else {
<span class="nc" id="L196">							invalidBkSerList.add(serBean);</span>
						}
					}
				}
			}
<span class="nc" id="L201">			System.out.println(&quot;invalid books : &quot; + inValidBooks</span>
					+ &quot;\nvalid books : &quot; + validBooks + &quot;\ninvalidBkSerList : &quot;
					+ invalidBkSerList);

			// verify Pack

<span class="nc" id="L207">			String fetchPackBookListQuery = &quot;select book_nbr, current_owner, book_status from st_se_game_inv_status where pack_nbr =? &quot;;</span>
<span class="nc" id="L208">			PreparedStatement packPstmt = connection</span>
					.prepareStatement(fetchPackBookListQuery);
<span class="nc bnc" id="L210" title="All 4 branches missed.">			if (packNo != null &amp;&amp; packNo.length &gt; 0) {</span>
<span class="nc bnc" id="L211" title="All 2 branches missed.">				for (int i = 0, l = packNo.length; i &lt; l; i++) {</span>
<span class="nc bnc" id="L212" title="All 2 branches missed.">					if (!&quot;&quot;.equals(packNo[i].trim())) {</span>
<span class="nc" id="L213">						packPstmt.setString(1, packNo[i]);</span>
<span class="nc" id="L214">						rs = packPstmt.executeQuery();</span>
<span class="nc" id="L215">						boolean pkflag = true;</span>
<span class="nc bnc" id="L216" title="All 2 branches missed.">						while (rs.next()) {</span>
<span class="nc bnc" id="L217" title="All 2 branches missed.">							if (!&quot;CLAIMED&quot;.equalsIgnoreCase(rs</span>
									.getString(&quot;book_status&quot;))) {
<span class="nc" id="L219">								validBooks.put(rs.getString(&quot;book_nbr&quot;), rs</span>
										.getString(&quot;current_owner&quot;));
<span class="nc" id="L221">								pkflag = false;</span>
							} else {
<span class="nc" id="L223">								inValidBooks.add(rs.getString(&quot;book_nbr&quot;));</span>
							}
						}
<span class="nc bnc" id="L226" title="All 2 branches missed.">						if (pkflag) {</span>
<span class="nc" id="L227">							invalidPacks.add(packNo[i]);</span>
						}
					}
				}
			}
<span class="nc" id="L232">			System.out.println(&quot;invalid books : &quot; + inValidBooks</span>
					+ &quot;\nvalid books : &quot; + validBooks + &quot;\ninvalidPacks : &quot;
					+ invalidPacks);

			// verify Pack Series

<span class="nc" id="L238">			String fetchPackBookSerListQuery = &quot;select book_nbr, current_owner, book_status from st_se_game_inv_status where pack_nbr between ? and ? &quot;;</span>
<span class="nc" id="L239">			PreparedStatement packSerPstmt = connection</span>
					.prepareStatement(fetchPackBookSerListQuery);
<span class="nc bnc" id="L241" title="All 8 branches missed.">			if (packSeriesFrom != null &amp;&amp; packSeriesTo != null</span>
					&amp;&amp; packSeriesFrom.length &gt; 0 &amp;&amp; packSeriesTo.length &gt; 0) {
<span class="nc" id="L243">				for (int i = 0, l = packSeriesFrom.length, k = packSeriesTo.length; i &lt; l</span>
<span class="nc bnc" id="L244" title="All 4 branches missed.">						&amp;&amp; i &lt; k; i++) {</span>
<span class="nc bnc" id="L245" title="All 4 branches missed.">					if (!&quot;&quot;.equals(packSeriesFrom[i].trim())</span>
							&amp;&amp; !&quot;&quot;.equals(packSeriesTo[i].trim())) {
<span class="nc" id="L247">						serBean = new BookSeriesBean();</span>
<span class="nc" id="L248">						serBean.setBookNbrFrom(packSeriesFrom[i]);</span>
<span class="nc" id="L249">						serBean.setBookNbrTo(packSeriesTo[i]);</span>
<span class="nc" id="L250">						serBean.setStatus(&quot;Pack Series is Not Valid&quot;);</span>

<span class="nc" id="L252">						packSerPstmt.setString(1, packSeriesFrom[i]);</span>
<span class="nc" id="L253">						packSerPstmt.setString(2, packSeriesTo[i]);</span>
<span class="nc" id="L254">						rs = packSerPstmt.executeQuery();</span>

<span class="nc" id="L256">						fromArr = packSeriesFrom[i].split(&quot;-&quot;);</span>
<span class="nc" id="L257">						toArr = packSeriesTo[i].split(&quot;-&quot;);</span>
<span class="nc" id="L258">						totBooks = Integer.parseInt(toArr[1])</span>
								- Integer.parseInt(fromArr[1]) + 1;
<span class="nc" id="L260">						rs.last(); // note 1</span>
<span class="nc" id="L261">						int size = rs.getRow(); // note 2</span>
<span class="nc" id="L262">						rs.beforeFirst(); // note 3</span>

<span class="nc" id="L264">						boolean pkflag = false;</span>
<span class="nc bnc" id="L265" title="All 2 branches missed.">						System.out.println(&quot;totBooks= = &quot; + totBooks</span>
								+ &quot;, rs.getFetchSize()=&quot; + size
								+ &quot; condition = &quot; + (totBooks == size));
<span class="nc bnc" id="L268" title="All 2 branches missed.">						if (totBooks == size) {</span>
<span class="nc bnc" id="L269" title="All 2 branches missed.">							while (rs.next()) {</span>
<span class="nc bnc" id="L270" title="All 4 branches missed.">								if (!(&quot;CLAIMED&quot;.equalsIgnoreCase(rs</span>
										.getString(&quot;book_status&quot;)) &amp;&amp; statusTypeFlag)) {
<span class="nc" id="L272">									validBooks.put(rs.getString(&quot;book_nbr&quot;), rs</span>
											.getString(&quot;current_owner&quot;));
<span class="nc" id="L274">									pkflag = false;</span>
								} else {
<span class="nc" id="L276">									inValidBooks.add(rs.getString(&quot;book_nbr&quot;));</span>
								}
							}
<span class="nc bnc" id="L279" title="All 2 branches missed.">							if (pkflag) {</span>
<span class="nc" id="L280">								invalidPkSerList.add(serBean);</span>
							}
						} else {
<span class="nc" id="L283">							invalidPkSerList.add(serBean);</span>
						}
					}
				}
			}
<span class="nc" id="L288">			System.out.println(&quot;invalid books : &quot; + inValidBooks</span>
					+ &quot;\nvalid books : &quot; + validBooks + &quot;\ninvalidPkSerList : &quot;
					+ invalidPkSerList);

<span class="nc" id="L292">			bookMap.put(&quot;validBooks&quot;, validBooks);</span>
<span class="nc" id="L293">			bookMap.put(&quot;inValidBooks&quot;, inValidBooks);</span>
<span class="nc" id="L294">			bookMap.put(&quot;invalidPacks&quot;, invalidPacks);</span>
<span class="nc" id="L295">			bookMap.put(&quot;invalidBkSerList&quot;, invalidBkSerList);</span>
<span class="nc" id="L296">			bookMap.put(&quot;invalidPkSerList&quot;, invalidPkSerList);</span>
<span class="nc" id="L297">			return bookMap;</span>

<span class="nc" id="L299">		} catch (SQLException e) {</span>
<span class="nc" id="L300">			e.printStackTrace();</span>
<span class="nc" id="L301">			throw new LMSException();</span>
		}
	}

	public Map&lt;String, Set&lt;String&gt;&gt; fetchValidVirnList(int gameId, String file,
			Connection con) throws LMSException {
<span class="nc" id="L307">		Map&lt;String, Set&lt;String&gt;&gt; map = new TreeMap&lt;String, Set&lt;String&gt;&gt;();</span>
		try {

			// get the game details from database
<span class="nc" id="L311">			GameTicketFormatBean ticketFmtBean = getGameDetails(con, gameId);</span>
<span class="nc" id="L312">			int gameNbrDigits = ticketFmtBean.getGameNbrDigits();</span>
<span class="nc" id="L313">			int maxRankDigits = ticketFmtBean.getMaxRankDigits();</span>
<span class="nc" id="L314">			int gameNbr = ticketFmtBean.getGameNbr();</span>
<span class="nc" id="L315">			int virnDigits = ticketFmtBean.getGameVirnDigits();</span>

			// VIRN file read from stream
<span class="nc" id="L318">			File fileObj = new File(file);</span>
<span class="nc bnc" id="L319" title="All 2 branches missed.">			if (!fileObj.exists()) {</span>
<span class="nc" id="L320">				return null;</span>
			}
<span class="nc" id="L322">			InputStreamReader fileStreamReader = new InputStreamReader(</span>
					new FileInputStream(file));
<span class="nc" id="L324">			BufferedReader br = new BufferedReader(fileStreamReader);</span>

			// It count the total no of virn_codes in file
<span class="nc" id="L327">			Set&lt;String&gt; virnCodeList = new TreeSet&lt;String&gt;();</span>
<span class="nc" id="L328">			Set&lt;String&gt; inVirnCodeList = new TreeSet&lt;String&gt;();</span>

<span class="nc" id="L330">			String strLine = null, virnCode = null;</span>
<span class="nc bnc" id="L331" title="All 2 branches missed.">			while ((strLine = br.readLine()) != null) {</span>
<span class="nc bnc" id="L332" title="All 6 branches missed.">				if (&quot;&quot;.equals(strLine.trim())</span>
						|| strLine.trim().length() != gameNbrDigits
								+ maxRankDigits + virnDigits
						|| gameNbr != Integer.parseInt(strLine.substring(0,
								gameNbrDigits))) {
<span class="nc" id="L337">					inVirnCodeList.add(strLine);</span>
<span class="nc" id="L338">					continue;</span>
				}
<span class="nc" id="L340">				virnCode = strLine.substring(gameNbrDigits + maxRankDigits,</span>
						strLine.length());
<span class="nc" id="L342">				virnCodeList.add(virnCode);</span>

			}
			// if(virnCodeList!=null &amp;&amp; !virnCodeList.isEmpty())
<span class="nc" id="L346">			map.put(&quot;validVirn&quot;, virnCodeList);</span>
			// if(inVirnCodeList!=null &amp;&amp; !inVirnCodeList.isEmpty())
<span class="nc" id="L348">			map.put(&quot;inValidVirn&quot;, inVirnCodeList);</span>

<span class="nc" id="L350">			return map;</span>
<span class="nc" id="L351">		} catch (IOException e) {</span>
<span class="nc" id="L352">			e.printStackTrace();</span>
<span class="nc" id="L353">			throw new LMSException(e);</span>
		}

	}

	private GameTicketFormatBean getGameDetails(Connection con, int gameId) {
<span class="nc" id="L359">		GameTicketFormatBean gameTicketFmtBean = new GameTicketFormatBean();</span>
<span class="nc" id="L360">		Connection conn = con;</span>
		try {
<span class="nc" id="L362">			String fetchGameDetQuery = &quot;select gm.game_id, gm.game_nbr, game_nbr_digits, game_rank_digits &quot;</span>
					+ &quot;, game_virn_digits from st_se_game_ticket_nbr_format gt, st_se_game_master gm where gm.game_id = gt.game_id &quot;
					+ &quot; and gm.game_id =&quot; + gameId;
<span class="nc" id="L365">			Statement stmt = conn.createStatement();</span>
<span class="nc" id="L366">			ResultSet rs = stmt.executeQuery(fetchGameDetQuery);</span>
<span class="nc bnc" id="L367" title="All 2 branches missed.">			while (rs.next()) {</span>
<span class="nc" id="L368">				gameTicketFmtBean.setGameId(rs.getInt(&quot;game_id&quot;));</span>
<span class="nc" id="L369">				gameTicketFmtBean.setGameNbr(rs.getInt(&quot;game_nbr&quot;));</span>
<span class="nc" id="L370">				gameTicketFmtBean</span>
						.setGameNbrDigits(rs.getInt(&quot;game_nbr_digits&quot;));
<span class="nc" id="L372">				gameTicketFmtBean.setMaxRankDigits(rs</span>
						.getInt(&quot;game_rank_digits&quot;));
<span class="nc" id="L374">				gameTicketFmtBean.setGameVirnDigits(rs</span>
						.getInt(&quot;game_virn_digits&quot;));
			}
<span class="nc" id="L377">			rs.close();</span>
<span class="nc" id="L378">			stmt.close();</span>
<span class="nc" id="L379">		} catch (SQLException e) {</span>
<span class="nc" id="L380">			e.printStackTrace();</span>
<span class="nc" id="L381">		}</span>
<span class="nc" id="L382">		return gameTicketFmtBean;</span>

	}

	public boolean isBookFormatValid(String bookNbr, int gameNbrDigits,
			int packNbrDigits, int bookNbrDigits, int gameId,
			int noOfBkPerPack, Connection connection) throws SQLException {

<span class="nc bnc" id="L390" title="All 2 branches missed.">		boolean isDesh = bookNbr.indexOf(&quot;-&quot;) != -1;</span>
<span class="nc bnc" id="L391" title="All 2 branches missed.">		if (!isDesh) {</span>
<span class="nc bnc" id="L392" title="All 4 branches missed.">			if (bookNbr.length() == gameNbrDigits + packNbrDigits</span>
					+ bookNbrDigits
					&amp;&amp; noOfBkPerPack &gt;= Integer.parseInt(bookNbr.substring(
							gameNbrDigits + packNbrDigits, bookNbr.length()))) {
<span class="nc" id="L396">				bookNbr = bookNbr.substring(0, gameNbrDigits) + &quot;-&quot;</span>
						+ bookNbr.substring(gameNbrDigits);
<span class="nc" id="L398">				return true;</span>
			} else {
<span class="nc" id="L400">				return false;</span>
				// Number Format Error/Out of Range Please Check
			}
<span class="nc bnc" id="L403" title="All 2 branches missed.">		} else if (bookNbr.split(&quot;-&quot;).length == 2) {</span>
<span class="nc bnc" id="L404" title="All 4 branches missed.">			if (bookNbr.length() == gameNbrDigits + packNbrDigits</span>
					+ bookNbrDigits + 1
					&amp;&amp; noOfBkPerPack &gt;= Integer.parseInt(bookNbr
							.substring(gameNbrDigits + packNbrDigits + 1,
									bookNbr.length()))) {
<span class="nc" id="L409">				return true;</span>
			} else {
<span class="nc" id="L411">				return false;</span>
				// Number Format Error/Out of Range Please Check
			}
		} else {
<span class="nc" id="L415">			return false;</span>
			// &quot;Number Format Error/Out of Range Please Check&quot;
		}

	}

	public Map updateBookNVirnStatus(String filePath, int gameId,
			String[] bookNo, String[] bookSeriesFrom, String[] bookSeriesTo,
			String[] packNo, String[] packSeriesFrom, String[] packSeriesTo,
			int userId, int userOrgId, String userType, String statusType,
			String remarks, String activateAt) throws LMSException {

		// validate data
<span class="nc" id="L428">		Connection connection = DBConnect.getConnection();</span>
<span class="nc" id="L429">		Map bookMap = new TreeMap();</span>

		try {
<span class="nc" id="L432">			connection.setAutoCommit(false);</span>

<span class="nc" id="L434">			System.out.println(&quot;status ---- &quot; + statusType);</span>
			// update Book's status

<span class="nc" id="L437">			String getTicketFormatQuery = &quot;select a.nbr_of_books_per_pack, b.pack_nbr_digits, &quot;</span>
					+ &quot;b.book_nbr_digits, b.game_nbr_digits, game_virn_digits, game_rank_digits  &quot;
					+ &quot;from st_se_game_master a,st_se_game_ticket_nbr_format b where  a.game_id=b.game_id&quot;
					+ &quot; and a.game_id=?&quot;;
<span class="nc" id="L441">			PreparedStatement pstmt = connection</span>
					.prepareStatement(getTicketFormatQuery);
<span class="nc" id="L443">			pstmt.setInt(1, gameId);</span>
<span class="nc" id="L444">			ResultSet result = pstmt.executeQuery();</span>
<span class="nc" id="L445">			System.out.println(&quot;getTicketFormatQuery = &quot; + pstmt);</span>
<span class="nc bnc" id="L446" title="All 2 branches missed.">			if (result.next()) {</span>
<span class="nc" id="L447">				int noOfBkPerPack = result.getInt(&quot;nbr_of_books_per_pack&quot;);</span>
<span class="nc" id="L448">				int gameNbrDigits = result.getInt(&quot;game_nbr_digits&quot;);</span>
<span class="nc" id="L449">				int packNbrDigits = result.getInt(&quot;pack_nbr_digits&quot;);</span>
<span class="nc" id="L450">				int bookNbrDigits = result.getInt(&quot;book_nbr_digits&quot;);</span>

<span class="nc" id="L452">				bookMap = fetchValidBookList(gameId, gameNbrDigits,</span>
						packNbrDigits, bookNbrDigits, noOfBkPerPack, bookNo,
						bookSeriesFrom, bookSeriesTo, packNo, packSeriesFrom,
						packSeriesTo, statusType, connection);

<span class="nc" id="L457">				TreeMap&lt;String, String&gt; validBooks = (TreeMap&lt;String, String&gt;) bookMap</span>
						.get(&quot;validBooks&quot;);
				;
<span class="nc" id="L460">				Set&lt;String&gt; inValidBooks = (Set&lt;String&gt;) bookMap</span>
						.get(&quot;inValidBooks&quot;);
<span class="nc" id="L462">				Set&lt;String&gt; invalidPacks = (Set&lt;String&gt;) bookMap</span>
						.get(&quot;invalidPacks&quot;);
<span class="nc" id="L464">				List&lt;BookSeriesBean&gt; invalidBkSerList = (List&lt;BookSeriesBean&gt;) bookMap</span>
						.get(&quot;invalidBkSerList&quot;);
<span class="nc" id="L466">				List&lt;BookSeriesBean&gt; invalidPkSerList = (List&lt;BookSeriesBean&gt;) bookMap</span>
						.get(&quot;invalidPkSerList&quot;);

<span class="nc bnc" id="L469" title="All 4 branches missed.">				if (validBooks != null &amp;&amp; validBooks.size() &gt; 0) {</span>
<span class="nc" id="L470">					updateBookStatus(validBooks, inValidBooks, userId,</span>
							userOrgId, gameId, gameNbrDigits, packNbrDigits,
							statusType, userType, remarks, connection,
							activateAt);
				}

			}

			// update VIRN's status
<span class="nc" id="L479">			Map&lt;String, Set&lt;String&gt;&gt; map = null;</span>

<span class="nc" id="L481">			Set&lt;String&gt; inValidVirnCodeSet = new TreeSet&lt;String&gt;();</span>
<span class="nc" id="L482">			Set&lt;String&gt; virnCodeSetToUpdate = new TreeSet&lt;String&gt;();</span>

<span class="nc bnc" id="L484" title="All 4 branches missed.">			if (filePath != null &amp;&amp; !&quot;&quot;.equals(filePath.trim())) {</span>
<span class="nc" id="L485">				System.out.println(&quot;File path ===&quot; + filePath + &quot;===&quot;);</span>
<span class="nc" id="L486">				map = fetchValidVirnList(gameId, filePath, connection);</span>
<span class="nc bnc" id="L487" title="All 4 branches missed.">				if (map != null &amp;&amp; !map.isEmpty()) {</span>
<span class="nc" id="L488">					inValidVirnCodeSet = map.get(&quot;inValidVirn&quot;);</span>
<span class="nc" id="L489">					virnCodeSetToUpdate = map.get(&quot;validVirn&quot;);</span>
				}
<span class="nc" id="L491">				System.out.println(&quot;inValidVirnCodeSet = &quot; + inValidVirnCodeSet</span>
						+ &quot;   , virnCodeSetToUpdate = &quot; + virnCodeSetToUpdate);
<span class="nc bnc" id="L493" title="All 4 branches missed.">				if (virnCodeSetToUpdate != null</span>
						&amp;&amp; virnCodeSetToUpdate.size() &gt; 0) {
<span class="nc" id="L495">					updateVirnStatus(virnCodeSetToUpdate, inValidVirnCodeSet,</span>
							userId, userOrgId, gameId, statusType, remarks,
							connection);
				}
<span class="nc" id="L499">				System.out.println(&quot;inValidVirnCodeList = &quot;</span>
						+ inValidVirnCodeSet + &quot;\nvirnCodeSetToUpdate = &quot;
						+ virnCodeSetToUpdate);

			}
<span class="nc" id="L504">			bookMap.put(&quot;inValidVirnCodeSet&quot;, inValidVirnCodeSet);</span>
<span class="nc" id="L505">			bookMap.put(&quot;virnCodeSetToUpdate&quot;, virnCodeSetToUpdate);</span>

<span class="nc" id="L507">			connection.commit();</span>

<span class="nc" id="L509">			return bookMap;</span>
<span class="nc" id="L510">		} catch (SQLException e) {</span>
<span class="nc" id="L511">			e.printStackTrace();</span>
<span class="nc" id="L512">			throw new LMSException(e);</span>
		} finally {
<span class="nc" id="L514">			try {</span>
<span class="nc bnc" id="L515" title="All 4 branches missed.">				if (connection != null) {</span>
<span class="nc" id="L516">					connection.close();</span>
				}
<span class="nc" id="L518">			} catch (SQLException e) {</span>
<span class="nc" id="L519">				e.printStackTrace();</span>
<span class="nc" id="L520">				throw new LMSException(e);</span>
<span class="nc" id="L521">			}</span>
		}
	}

	public void updateBookStatus(TreeMap&lt;String, String&gt; validBooks,
			Set&lt;String&gt; invalidBooks, int userId, int userOrgId, int gameId,
			int gameNbrDigits, int packNbrDigits, String statusType,
			String userType, String remarks, Connection connection,
			String activateAt) throws SQLException {

<span class="nc" id="L531">		String updGameInvStatusQuery = &quot;update st_se_game_inv_status set book_status = ? where book_nbr = ? and book_status !='CLAIMED' and game_id = &quot;</span>
				+ gameId;
<span class="nc" id="L533">		PreparedStatement updGameInvStatusPstmt = connection</span>
				.prepareStatement(updGameInvStatusQuery);

<span class="nc" id="L536">		String insIntoMissBkHistoryQuery = &quot;insert into st_se_miss_book_history(game_id, pack_nbr, book_nbr,&quot;</span>
				+ &quot; status, user_id, user_org_id, date, remarks) values (&quot;
				+ gameId
				+ &quot;, ?, ?, ?, &quot;
				+ userId
				+ &quot;, &quot;
				+ userOrgId
				+ &quot;, '&quot;
				+ new Timestamp(new Date().getTime())
				+ &quot;', '&quot;
				+ remarks
				+ &quot;') &quot;;
<span class="nc" id="L548">		PreparedStatement insIntoMissBkHistoryPstmt = connection</span>
				.prepareStatement(insIntoMissBkHistoryQuery);

<span class="nc" id="L551">		int bkUpdRowCount = 0, bkInsRowCount = 0, bkRowUp;</span>
<span class="nc" id="L552">		int packLength = gameNbrDigits + packNbrDigits + 1;</span>

<span class="nc" id="L554">		String packNbr = null;</span>
<span class="nc" id="L555">		String bookNo = null;</span>
<span class="nc" id="L556">		String curOwner = null;</span>
<span class="nc" id="L557">		String status = &quot;MISSING&quot;;</span>
<span class="nc" id="L558">		System.out.println(&quot;statusType = &quot; + statusType);</span>
<span class="nc" id="L559">		Iterator&lt;Map.Entry&lt;String, String&gt;&gt; validMapItr = validBooks.entrySet()</span>
				.iterator();
<span class="nc bnc" id="L561" title="All 2 branches missed.">		while (validMapItr.hasNext()) {</span>
<span class="nc" id="L562">			Map.Entry&lt;String, String&gt; validPair = validMapItr.next();</span>
<span class="nc" id="L563">			bookNo = validPair.getKey();// Book Nbr</span>
<span class="nc" id="L564">			curOwner = validPair.getValue();// Owner</span>

<span class="nc" id="L566">			System.out.println(&quot;Book No ::&quot; + bookNo + &quot;  Cur Owner ::&quot;</span>
					+ curOwner);
<span class="nc bnc" id="L568" title="All 2 branches missed.">			if (&quot;ACTIVATE&quot;.equalsIgnoreCase(statusType.trim())) {</span>
<span class="nc" id="L569">				status = &quot;INACTIVE&quot;;</span>
<span class="nc bnc" id="L570" title="All 4 branches missed.">				if (activateAt.equals(&quot;BO-AGENT&quot;)</span>
						&amp;&amp; !&quot;BO&quot;.equalsIgnoreCase(curOwner.trim())) {
<span class="nc" id="L572">					status = &quot;ACTIVE&quot;;</span>
<span class="nc bnc" id="L573" title="All 4 branches missed.">				} else if (activateAt.equals(&quot;AGENT-RETAILER&quot;)</span>
						&amp;&amp; &quot;RETAILER&quot;.equalsIgnoreCase(curOwner.trim())) {
<span class="nc" id="L575">					status = &quot;ACTIVE&quot;;</span>
				}

			}

<span class="nc" id="L580">			System.out.println(&quot;Status ::&quot; + status);</span>
<span class="nc" id="L581">			updGameInvStatusPstmt.setString(1, status);</span>
<span class="nc" id="L582">			updGameInvStatusPstmt.setString(2, bookNo);</span>
<span class="nc" id="L583">			System.out.println(&quot;Query ::&quot; + updGameInvStatusPstmt);</span>
<span class="nc" id="L584">			bkRowUp = updGameInvStatusPstmt.executeUpdate();</span>
<span class="nc" id="L585">			bkUpdRowCount += bkRowUp;</span>

<span class="nc" id="L587">			packNbr = bookNo.substring(0, packLength);</span>

			// ins data into st_se_miss_book_history
<span class="nc bnc" id="L590" title="All 2 branches missed.">			if (bkRowUp &gt; 0) {</span>
<span class="nc" id="L591">				insIntoMissBkHistoryPstmt.setString(1, packNbr);</span>
<span class="nc" id="L592">				insIntoMissBkHistoryPstmt.setString(2, bookNo);</span>
<span class="nc" id="L593">				insIntoMissBkHistoryPstmt.setString(3, status);</span>
<span class="nc" id="L594">				bkInsRowCount += insIntoMissBkHistoryPstmt.executeUpdate();</span>
			} else {
<span class="nc" id="L596">				invalidBooks.add(bookNo);</span>
<span class="nc" id="L597">				System.out.println(bookNo + &quot; status is not updated in table&quot;);</span>
			}
<span class="nc" id="L599">		}</span>

<span class="nc" id="L601">		System.out.println(&quot;in validBooks : &quot; + invalidBooks);</span>

<span class="nc" id="L603">	}</span>

	public void updateVirnStatus(Set&lt;String&gt; virnCodeSetToUpdate,
			Set&lt;String&gt; inValidVirnCodeSet, int userId, int userOrgId,
			int gameId, String statusType, String remarks, Connection connection)
			throws SQLException, LMSException {

<span class="nc" id="L610">		String fetchGameNbrQuery = &quot;select game_nbr from st_se_game_master where game_id = &quot;</span>
				+ gameId;
<span class="nc" id="L612">		Statement stmt = connection.createStatement();</span>
<span class="nc" id="L613">		ResultSet rs = stmt.executeQuery(fetchGameNbrQuery);</span>
<span class="nc" id="L614">		int gameNbr = -1;</span>
<span class="nc bnc" id="L615" title="All 2 branches missed.">		if (rs.next()) {</span>
<span class="nc" id="L616">			gameNbr = rs.getInt(&quot;game_nbr&quot;);</span>
		} else {
<span class="nc" id="L618">			throw new LMSException(&quot;game Nbr is not find for game id = &quot;</span>
					+ gameId);
		}

<span class="nc" id="L622">		String status = &quot;MISSING&quot;;</span>

		// update status of VIRNS into st_se_pwt_inv_ table query
<span class="nc" id="L625">		String updVirnStatusQuery = &quot;update st_se_pwt_inv_&quot;</span>
				+ gameNbr
				+ &quot; set status = 'MISSING' where &quot;
				+ &quot; virn_code = ? and (status='UNCLM_PWT' or status='UNCLM_CANCELLED') and game_id =&quot;
				+ gameId;

<span class="nc bnc" id="L631" title="All 2 branches missed.">		if (&quot;ACTIVATE&quot;.equalsIgnoreCase(statusType.trim())) {</span>
<span class="nc" id="L632">			updVirnStatusQuery = &quot;update st_se_pwt_inv_&quot; + gameNbr</span>
					+ &quot; set status = 'UNCLM_PWT' where &quot;
					+ &quot; virn_code = ? and status='MISSING' and game_id =&quot;
					+ gameId;
<span class="nc" id="L636">			status = &quot;UNCLM_PWT&quot;;</span>
		}
<span class="nc" id="L638">		PreparedStatement updVirnStatusPstmt = connection</span>
				.prepareStatement(updVirnStatusQuery);

		// insert VIRNS into st_se_miss_pwt_inv_history table query
<span class="nc" id="L642">		String insIntoMissVirnHistoryQuery = &quot;insert into st_se_miss_pwt_inv_history (virn_code, game_id, status, &quot;</span>
				+ &quot; user_id, user_org_id, date, remarks) values(?, &quot;
				+ gameId
				+ &quot;, '&quot;
				+ status
				+ &quot;', &quot;
				+ userId
				+ &quot;, &quot;
				+ userOrgId
				+ &quot;, '&quot;
				+ new Timestamp(new Date().getTime()) + &quot;', '&quot; + remarks + &quot;')&quot;;
<span class="nc" id="L653">		PreparedStatement insIntoMissVirnHistoryPstmt = connection</span>
				.prepareStatement(insIntoMissVirnHistoryQuery);

<span class="nc" id="L656">		int virnInsRowCount = 0, virnUpdRowCount = 0;</span>
<span class="nc bnc" id="L657" title="All 2 branches missed.">		for (String virnCode : virnCodeSetToUpdate) {</span>
<span class="nc" id="L658">			updVirnStatusPstmt.setString(1, MD5Encoder.encode(virnCode.trim()));</span>
<span class="nc" id="L659">			virnUpdRowCount = updVirnStatusPstmt.executeUpdate();</span>

			// ins data into st_miss_virn_history
<span class="nc bnc" id="L662" title="All 2 branches missed.">			if (virnUpdRowCount &gt; 0) {</span>
<span class="nc" id="L663">				insIntoMissVirnHistoryPstmt.setString(1, virnCode);</span>
<span class="nc" id="L664">				virnInsRowCount += insIntoMissVirnHistoryPstmt.executeUpdate();</span>
			} else {
				// virnCodeSetToUpdate.remove(virnCode);
<span class="nc" id="L667">				inValidVirnCodeSet.add(virnCode);</span>
<span class="nc" id="L668">				System.out.println(virnCode + &quot; Not Exist in st_se_pwt_inv_&quot;</span>
						+ gameNbr + &quot; table&quot;);
			}
<span class="nc" id="L671">		}</span>

<span class="nc" id="L673">		String fetchPrizeTypeQuery = &quot;select prize_amt from st_se_rank_master where  game_id= ? group by prize_amt&quot;;</span>
<span class="nc" id="L674">		PreparedStatement fetchPrizeTypePstmt = connection</span>
				.prepareStatement(fetchPrizeTypeQuery);
<span class="nc" id="L676">		fetchPrizeTypePstmt.setInt(1, gameId);</span>
<span class="nc" id="L677">		ResultSet fetchPrizeTypeRs = fetchPrizeTypePstmt.executeQuery();</span>

		// query to update cancel VIRN list by recalculating the st_se_pwt_inv_?
		// game table
<span class="nc" id="L681">		String updCancelVirnQuery = &quot;update st_se_rank_master  set no_of_prize_cancel = (select count(aa.pwt_amt)&quot;</span>
				+ &quot; 'no_of_prize_cancel' from st_se_pwt_inv_? aa where aa.status='MISSING' and aa.game_id=? &quot;
				+ &quot; and pwt_amt = ?) where prize_amt = ? and game_id=?&quot;;
<span class="nc" id="L684">		PreparedStatement updCancelVirnPstmt = connection</span>
				.prepareStatement(updCancelVirnQuery);
<span class="nc" id="L686">		updCancelVirnPstmt.setInt(1, gameNbr);</span>
<span class="nc" id="L687">		updCancelVirnPstmt.setInt(2, gameId);</span>

<span class="nc" id="L689">		System.out.println(&quot;updCancelVirnPstmtQuery == &quot; + updCancelVirnPstmt);</span>
<span class="nc" id="L690">		double prizeAmt = 0.0, noOfRowsUpd = 0;</span>
<span class="nc bnc" id="L691" title="All 2 branches missed.">		while (fetchPrizeTypeRs.next()) {</span>
<span class="nc" id="L692">			prizeAmt = fetchPrizeTypeRs.getDouble(&quot;prize_amt&quot;);</span>
<span class="nc" id="L693">			updCancelVirnPstmt.setDouble(3, prizeAmt);</span>
<span class="nc" id="L694">			updCancelVirnPstmt.setDouble(4, prizeAmt);</span>
<span class="nc" id="L695">			updCancelVirnPstmt.setInt(5, gameId);</span>
<span class="nc" id="L696">			System.out</span>
					.println(&quot;updCancelVirnPstmt ===== &quot; + updCancelVirnPstmt);
<span class="nc" id="L698">			noOfRowsUpd = updCancelVirnPstmt.executeUpdate();</span>
<span class="nc" id="L699">			System.out.println(noOfRowsUpd + &quot; rows updated.&quot;);</span>
		}

<span class="nc" id="L702">	}</span>

	public String validateBookNVirnEntries(String fileName, int gameId,
			String[] bookNbr, String[] bookSeriesFrom, String[] bookSeriesTo,
			String[] packNbr, String[] packSeriesFrom, String[] packSeriesTo,
			String remarks) {
<span class="nc" id="L708">		String errMes = &quot;&quot;;</span>
<span class="nc bnc" id="L709" title="All 2 branches missed.">		if (gameId &lt;= 0) {</span>
<span class="nc" id="L710">			errMes = &quot;Please Select The Game Name.&quot;;</span>
		}
<span class="nc bnc" id="L712" title="All 4 branches missed.">		if (fileName == null || &quot;&quot;.equals(fileName.trim())) {</span>
<span class="nc bnc" id="L713" title="All 24 branches missed.">			if ((bookNbr == null || bookNbr.length &lt;= 0)</span>
					&amp;&amp; (bookSeriesFrom == null || bookSeriesFrom.length &lt;= 0)
					&amp;&amp; (bookSeriesTo == null || bookSeriesTo.length &lt;= 0)
					&amp;&amp; (packNbr == null || packNbr.length &lt;= 0)
					&amp;&amp; (packSeriesFrom == null || packSeriesFrom.length &lt;= 0)
					&amp;&amp; (packSeriesTo == null || packSeriesTo.length &lt;= 0)) {
<span class="nc" id="L719">				errMes = &quot;Please Fill Empty Entries.&quot;;</span>
<span class="nc bnc" id="L720" title="All 4 branches missed.">			} else if (remarks == null || &quot;&quot;.equals(remarks.trim())) {</span>
<span class="nc" id="L721">				errMes = &quot;Please Write Remarks.&quot;;</span>
			}
<span class="nc bnc" id="L723" title="All 4 branches missed.">		} else if (remarks == null || &quot;&quot;.equals(remarks.trim())) {</span>
<span class="nc" id="L724">			errMes = &quot;Please Fill Entries in Remarks.&quot;;</span>
		}
<span class="nc" id="L726">		System.out.println(errMes);</span>
<span class="nc" id="L727">		return errMes;</span>
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.7.201606060606</span></div></body></html>