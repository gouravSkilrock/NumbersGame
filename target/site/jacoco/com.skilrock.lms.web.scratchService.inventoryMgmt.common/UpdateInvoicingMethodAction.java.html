<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>UpdateInvoicingMethodAction.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">lms</a> &gt; <a href="index.source.html" class="el_package">com.skilrock.lms.web.scratchService.inventoryMgmt.common</a> &gt; <span class="el_source">UpdateInvoicingMethodAction.java</span></div><h1>UpdateInvoicingMethodAction.java</h1><pre class="source lang-java linenums">package com.skilrock.lms.web.scratchService.inventoryMgmt.common;

import java.io.PrintWriter;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;

import net.minidev.json.JSONObject;

import com.google.gson.JsonArray;
import com.google.gson.JsonObject;
import com.google.gson.JsonParser;
import com.skilrock.lms.common.BaseAction;
import com.skilrock.lms.web.scratchService.inventoryMgmt.javaBeans.AgentInvoicingMethodBean;
import com.skilrock.lms.web.scratchService.inventoryMgmt.serviceImpl.UpdateInvoicingMethodServiceImpl;

public class UpdateInvoicingMethodAction extends BaseAction {
	private static final long serialVersionUID = 1L;

	private int gameId;
	private Map&lt;Integer, String&gt; gameMap;
	private List&lt;AgentInvoicingMethodBean&gt; agentDetailList;
	private int agentOrgId;
	private String jsonParamData;
	private Map&lt;Integer, String&gt; invoiceMap;
	private Map&lt;Integer, String&gt; methodIdMap;

	public UpdateInvoicingMethodAction() {
<span class="nc" id="L29">		super(&quot;UpdateInvoicingMethodAction&quot;);</span>
<span class="nc" id="L30">	}</span>

	public int getGameId() {
<span class="nc" id="L33">		return gameId;</span>
	}

	public void setGameId(int gameId) {
<span class="nc" id="L37">		this.gameId = gameId;</span>
<span class="nc" id="L38">	}</span>

	public Map&lt;Integer, String&gt; getGameMap() {
<span class="nc" id="L41">		return gameMap;</span>
	}

	public void setGameMap(Map&lt;Integer, String&gt; gameMap) {
<span class="nc" id="L45">		this.gameMap = gameMap;</span>
<span class="nc" id="L46">	}</span>

	public List&lt;AgentInvoicingMethodBean&gt; getAgentDetailList() {
<span class="nc" id="L49">		return agentDetailList;</span>
	}

	public void setAgentDetailList(List&lt;AgentInvoicingMethodBean&gt; agentDetailList) {
<span class="nc" id="L53">		this.agentDetailList = agentDetailList;</span>
<span class="nc" id="L54">	}</span>

	public int getAgentOrgId() {
<span class="nc" id="L57">		return agentOrgId;</span>
	}

	public void setAgentOrgId(int agentOrgId) {
<span class="nc" id="L61">		this.agentOrgId = agentOrgId;</span>
<span class="nc" id="L62">	}</span>

	public String getJsonParamData() {
<span class="nc" id="L65">		return jsonParamData;</span>
	}

	public void setJsonParamData(String jsonParamData) {
<span class="nc" id="L69">		this.jsonParamData = jsonParamData;</span>
<span class="nc" id="L70">	}</span>

	public Map&lt;Integer, String&gt; getInvoiceMap() {
<span class="nc" id="L73">		return invoiceMap;</span>
	}

	public void setInvoiceMap(Map&lt;Integer, String&gt; invoiceMap) {
<span class="nc" id="L77">		this.invoiceMap = invoiceMap;</span>
<span class="nc" id="L78">	}</span>

	public Map&lt;Integer, String&gt; getMethodIdMap() {
<span class="nc" id="L81">		return methodIdMap;</span>
	}

	public void setMethodIdMap(Map&lt;Integer, String&gt; methodIdMap) {
<span class="nc" id="L85">		this.methodIdMap = methodIdMap;</span>
<span class="nc" id="L86">	}</span>

	public String updateInvoicingMethodMenu() {
		try {
<span class="nc" id="L90">			gameMap = UpdateInvoicingMethodServiceImpl.getInstance().activeGameMap();</span>
<span class="nc" id="L91">		} catch (Exception ex) {</span>
<span class="nc" id="L92">			ex.printStackTrace();</span>
<span class="nc" id="L93">		}</span>

<span class="nc" id="L95">		return SUCCESS;</span>
	}

	public String updateInvoicingMethodSearch() {
		try {
<span class="nc" id="L100">			agentDetailList = UpdateInvoicingMethodServiceImpl.getInstance().getAgentInvoicingMethod(gameId);</span>
<span class="nc" id="L101">			invoiceMap = UpdateInvoicingMethodServiceImpl.getInstance().getInvoicingMethods();</span>
<span class="nc" id="L102">		} catch (Exception ex) {</span>
<span class="nc" id="L103">			ex.printStackTrace();</span>
<span class="nc" id="L104">		}</span>

<span class="nc" id="L106">		return SUCCESS;</span>
	}

	public void methodIdMap(){
		try {
<span class="nc" id="L111">			JSONObject Obj = new JSONObject();</span>
<span class="nc" id="L112">			PrintWriter out = getResponse().getWriter();</span>
<span class="nc" id="L113">			response.setContentType(&quot;application/json&quot;);</span>
<span class="nc" id="L114">			methodIdMap = UpdateInvoicingMethodServiceImpl.getInstance().getMethodIdMap();</span>
<span class="nc" id="L115">			Obj.put(&quot;arg0&quot;, methodIdMap);</span>
<span class="nc" id="L116">			out.print(Obj);</span>
			
<span class="nc" id="L118">		} catch (Exception ex) {</span>
<span class="nc" id="L119">			ex.printStackTrace();</span>
<span class="nc" id="L120">		}</span>
<span class="nc" id="L121">	}</span>

	public void updateInvoicingMethod() {
<span class="nc" id="L124">		agentDetailList = new ArrayList&lt;AgentInvoicingMethodBean&gt;();</span>
		try {
<span class="nc" id="L126">			JsonArray dataArray = new JsonParser().parse(jsonParamData).getAsJsonArray();</span>
<span class="nc" id="L127">			AgentInvoicingMethodBean methodBean = null;</span>
<span class="nc" id="L128">			JsonObject updateData = null;</span>
<span class="nc bnc" id="L129" title="All 2 branches missed.">			for(int i=0; i&lt;dataArray.size(); i++) {</span>
<span class="nc" id="L130">        		updateData = dataArray.get(i).getAsJsonObject();</span>
<span class="nc" id="L131">        		methodBean = new AgentInvoicingMethodBean();</span>
<span class="nc" id="L132">				methodBean.setOrgId(updateData.get(&quot;orgId&quot;).getAsInt());</span>
<span class="nc" id="L133">				methodBean.setMethodId(updateData.get(&quot;methodId&quot;).getAsInt());</span>
<span class="nc" id="L134">				methodBean.setMethodValue(updateData.get(&quot;methodValue&quot;).getAsString());</span>
<span class="nc" id="L135">				agentDetailList.add(methodBean);</span>
        	}

<span class="nc" id="L138">			UpdateInvoicingMethodServiceImpl.getInstance().updateInvoicingMethod(gameId, agentDetailList, getUserBean().getUserId(), request.getRemoteAddr());</span>
<span class="nc" id="L139">		} catch (Exception ex) {</span>
<span class="nc" id="L140">			ex.printStackTrace();</span>
<span class="nc" id="L141">		}</span>
<span class="nc" id="L142">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.7.201606060606</span></div></body></html>