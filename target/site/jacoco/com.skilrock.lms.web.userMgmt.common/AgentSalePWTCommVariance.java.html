<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>AgentSalePWTCommVariance.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">lms</a> &gt; <a href="index.source.html" class="el_package">com.skilrock.lms.web.userMgmt.common</a> &gt; <span class="el_source">AgentSalePWTCommVariance.java</span></div><h1>AgentSalePWTCommVariance.java</h1><pre class="source lang-java linenums">package com.skilrock.lms.web.userMgmt.common;

import java.io.PrintWriter;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.apache.struts2.interceptor.ServletRequestAware;
import org.apache.struts2.interceptor.ServletResponseAware;

import com.opensymphony.xwork2.ActionSupport;
import com.skilrock.lms.beans.SalePwtCommVarBean;
import com.skilrock.lms.beans.UserInfoBean;
import com.skilrock.lms.coreEngine.userMgmt.common.AgentSalePWTCommVarianceHelper;

<span class="nc" id="L22">public class AgentSalePWTCommVariance extends ActionSupport implements</span>
		ServletRequestAware, ServletResponseAware {

	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;

	private String agentOrgName;

	private String agtOrgName;
	private String buttonValue;

	private String defPwtCommRate;

	private String defSaleCommRate;
	
	private String defWidCommRate;
	private String defDepCommRate;
	private String defNetGCommRate;
	
	private String gameName;
	private String gamestatus;
	private String gameStatus;
	private String gametype;
	private String gname;
<span class="nc" id="L48">	Log logger = LogFactory.getLog(AgentSalePWTCommVariance.class);</span>
	private String orgType;

	private String pwtCommVar;

	private HttpServletRequest request;

	private HttpServletResponse response;

	private String retailerOrgName;

	private String saleCommVar;
	
	private String widCommVar;
	private String depCommVar;
	private String netGCommVar;

	private String serviceName;

	public String agentSalePwtCommVarianceDetail() {
<span class="nc" id="L68">		logger.debug(&quot;clicked button value is : === &quot; + buttonValue</span>
				+ &quot;  game status : &quot; + gamestatus);
<span class="nc" id="L70">		AgentSalePWTCommVarianceHelper helper = new AgentSalePWTCommVarianceHelper();</span>
<span class="nc" id="L71">		logger.debug(&quot;serviceName &quot; + serviceName);</span>
<span class="nc" id="L72">		logger.debug(&quot;orgType &quot; + orgType);</span>
<span class="nc bnc" id="L73" title="All 2 branches missed.">		if (serviceName.equalsIgnoreCase(&quot;SE&quot;)) {</span>
<span class="nc" id="L74">			List&lt;SalePwtCommVarBean&gt; salePwtCommVarList = new ArrayList&lt;SalePwtCommVarBean&gt;();</span>
<span class="nc" id="L75">			salePwtCommVarList = helper.salePwtCommVarList(agentOrgName,</span>
					gamestatus, orgType);
<span class="nc" id="L77">			HttpSession session = request.getSession();</span>
<span class="nc" id="L78">			session</span>
					.setAttribute(&quot;salePwtCommVarSearchList&quot;,
							salePwtCommVarList);
<span class="nc" id="L81">			return SUCCESS;</span>
<span class="nc bnc" id="L82" title="All 2 branches missed.">		} else if (serviceName.equalsIgnoreCase(&quot;DG&quot;)) {</span>
<span class="nc" id="L83">			List&lt;SalePwtCommVarBean&gt; salePwtCommVarList = new ArrayList&lt;SalePwtCommVarBean&gt;();</span>
<span class="nc" id="L84">			salePwtCommVarList = helper.salePwtCommVarListForDg(agentOrgName,</span>
					gamestatus, orgType);
<span class="nc" id="L86">			HttpSession session = request.getSession();</span>
<span class="nc" id="L87">			session</span>
					.setAttribute(&quot;salePwtCommVarSearchList&quot;,
							salePwtCommVarList);
<span class="nc" id="L90">			return SUCCESS;</span>
<span class="nc bnc" id="L91" title="All 2 branches missed.">		}else if (serviceName.equalsIgnoreCase(&quot;OLA&quot;)) {</span>
<span class="nc" id="L92">			List&lt;SalePwtCommVarBean&gt; salePwtCommVarList = new ArrayList&lt;SalePwtCommVarBean&gt;();</span>
<span class="nc" id="L93">			salePwtCommVarList = helper.salePwtCommVarListOLA(agentOrgName,</span>
					gamestatus, orgType);
<span class="nc" id="L95">			HttpSession session = request.getSession();</span>
<span class="nc" id="L96">			session</span>
					.setAttribute(&quot;salePwtCommVarSearchList&quot;,
							salePwtCommVarList);
<span class="nc" id="L99">			return SUCCESS;</span>
<span class="nc bnc" id="L100" title="All 2 branches missed.">		}else if(serviceName.equalsIgnoreCase(&quot;CS&quot;)){</span>
<span class="nc" id="L101">			List&lt;SalePwtCommVarBean&gt; salePwtCommVarList = new ArrayList&lt;SalePwtCommVarBean&gt;();</span>
<span class="nc" id="L102">			salePwtCommVarList = helper.saleCommVarListForCS(agentOrgName,</span>
					gamestatus, orgType);
<span class="nc" id="L104">			HttpSession session = request.getSession();</span>
<span class="nc" id="L105">			session</span>
					.setAttribute(&quot;salePwtCommVarSearchList&quot;,
							salePwtCommVarList);
<span class="nc" id="L108">			return SUCCESS;</span>
<span class="nc bnc" id="L109" title="All 2 branches missed.">		} else if (&quot;IW&quot;.equalsIgnoreCase(serviceName)) {</span>
<span class="nc" id="L110">			List&lt;SalePwtCommVarBean&gt; salePwtCommVarList = new ArrayList&lt;SalePwtCommVarBean&gt;();</span>
<span class="nc" id="L111">			salePwtCommVarList = helper.salePwtCommVarListForIW(agentOrgName, gamestatus, orgType);</span>
<span class="nc" id="L112">			HttpSession session = request.getSession();</span>
<span class="nc" id="L113">			session.setAttribute(&quot;salePwtCommVarSearchList&quot;, salePwtCommVarList);</span>
<span class="nc" id="L114">			return SUCCESS;</span>
<span class="nc bnc" id="L115" title="All 2 branches missed.">       }  else if (&quot;VS&quot;.equalsIgnoreCase(serviceName)) {</span>
<span class="nc" id="L116">			List&lt;SalePwtCommVarBean&gt; salePwtCommVarList = new ArrayList&lt;SalePwtCommVarBean&gt;();</span>
<span class="nc" id="L117">			salePwtCommVarList = helper.salePwtCommVarListForVS(agentOrgName, gamestatus, orgType);</span>
<span class="nc" id="L118">			HttpSession session = request.getSession();</span>
<span class="nc" id="L119">			session.setAttribute(&quot;salePwtCommVarSearchList&quot;, salePwtCommVarList);</span>
<span class="nc" id="L120">			return SUCCESS;</span>
     	}
<span class="nc" id="L122">		return ERROR;</span>

	}

	public String chackOrgType() {
<span class="nc" id="L127">		String returnVal = &quot;error&quot;;</span>
<span class="nc bnc" id="L128" title="All 2 branches missed.">		if (&quot;AGENT&quot;.equals(orgType)) {</span>
<span class="nc" id="L129">			returnVal = agentSalePwtCommVarianceDetail();</span>
<span class="nc bnc" id="L130" title="All 4 branches missed.">			if (&quot;success&quot;.equalsIgnoreCase(returnVal) &amp;&amp; &quot;CS&quot;.equalsIgnoreCase(serviceName)) {</span>
<span class="nc" id="L131">				returnVal = &quot;agentCS&quot;;</span>
<span class="nc bnc" id="L132" title="All 4 branches missed.">			} else if (&quot;success&quot;.equalsIgnoreCase(returnVal) &amp;&amp; &quot;OLA&quot;.equalsIgnoreCase(serviceName)) {</span>
<span class="nc" id="L133">				returnVal = &quot;agentOLA&quot;;</span>
<span class="nc bnc" id="L134" title="All 4 branches missed.">			} else if (&quot;success&quot;.equalsIgnoreCase(returnVal) &amp;&amp; &quot;IW&quot;.equalsIgnoreCase(serviceName)) {</span>
<span class="nc" id="L135">				returnVal = &quot;agentIW&quot;;</span>
<span class="nc bnc" id="L136" title="All 4 branches missed.">			} else if (&quot;success&quot;.equalsIgnoreCase(returnVal) &amp;&amp; &quot;VS&quot;.equalsIgnoreCase(serviceName)) {</span>
<span class="nc" id="L137">				returnVal = &quot;agentVS&quot;;</span>
			}
<span class="nc bnc" id="L139" title="All 2 branches missed.">		} else if (&quot;RETAILER&quot;.equals(orgType)) {</span>
<span class="nc" id="L140">			RetailerSalePWTCommVariance retAction = new RetailerSalePWTCommVariance();</span>
<span class="nc" id="L141">			retAction.setOrgType(orgType);</span>
<span class="nc" id="L142">			retAction.setServiceName(serviceName);</span>
<span class="nc" id="L143">			retAction.setAgentOrgName(retailerOrgName); // retailer org Name</span>
<span class="nc" id="L144">			retAction.setGamestatus(gamestatus);</span>
<span class="nc" id="L145">			retAction.setServletRequest(request);</span>
<span class="nc" id="L146">			returnVal = retAction.retailerSalePwtCommVarianceDetail();</span>
<span class="nc bnc" id="L147" title="All 4 branches missed.">			if (&quot;success&quot;.equalsIgnoreCase(returnVal) &amp;&amp; &quot;OLA&quot;.equalsIgnoreCase(serviceName)) {</span>
<span class="nc" id="L148">				returnVal = &quot;retailerOLA&quot;;</span>
<span class="nc bnc" id="L149" title="All 4 branches missed.">			} else if (&quot;success&quot;.equalsIgnoreCase(returnVal) &amp;&amp; &quot;CS&quot;.equalsIgnoreCase(serviceName)) {</span>
<span class="nc" id="L150">				returnVal = &quot;retailerCS&quot;;</span>
<span class="nc bnc" id="L151" title="All 4 branches missed.">			} else if (&quot;success&quot;.equalsIgnoreCase(returnVal) &amp;&amp; &quot;IW&quot;.equalsIgnoreCase(serviceName)) {</span>
<span class="nc" id="L152">				returnVal = &quot;retailerIW&quot;;</span>
<span class="nc bnc" id="L153" title="All 4 branches missed.">			} else if (&quot;success&quot;.equalsIgnoreCase(returnVal) &amp;&amp; &quot;VS&quot;.equalsIgnoreCase(serviceName)) {</span>
<span class="nc" id="L154">				returnVal = &quot;retailerVS&quot;;</span>
<span class="nc bnc" id="L155" title="All 2 branches missed.">			} else if (&quot;success&quot;.equalsIgnoreCase(returnVal)) {</span>
<span class="nc" id="L156">				returnVal = &quot;retailer&quot;;</span>
			}
		}
<span class="nc" id="L159">		return returnVal;</span>
	}

	public String execute() {
<span class="nc" id="L163">		HttpSession session = request.getSession();</span>
<span class="nc" id="L164">		UserInfoBean userInfoBean = (UserInfoBean) session</span>
				.getAttribute(&quot;USER_INFO&quot;);
<span class="nc" id="L166">		AgentSalePWTCommVarianceHelper helper = new AgentSalePWTCommVarianceHelper();</span>
		// List&lt;String&gt; agentNameList=new ArrayList&lt;String&gt;();
<span class="nc" id="L168">		logger.info(&quot;in side execute ====== &quot;);</span>
<span class="nc" id="L169">		System.out.println(&quot;in side execute ====== &quot;);</span>
		// agentNameList=helper.getAgentNameList(userInfoBean.getUserType());
		/*
		 * if(agentNameList.size()&lt;1) return ERROR;
		 */
		// System.out.println(&quot;111111111&quot;);
<span class="nc" id="L175">		session.setAttribute(&quot;agentNameList&quot;, new ArrayList());</span>

<span class="nc" id="L177">		Map&lt;String, String&gt; serviceNameMap = helper.getServiceList();</span>
<span class="nc" id="L178">		session.setAttribute(&quot;serviceNameMap&quot;, serviceNameMap);</span>
<span class="nc" id="L179">		int tierId = userInfoBean.getTierId();</span>
<span class="nc" id="L180">		Map&lt;String, String&gt; organizationTypeMap = helper</span>
				.getOrganizationType(tierId);
<span class="nc" id="L182">		session.setAttribute(&quot;organizationTypeMap&quot;, organizationTypeMap);</span>

<span class="nc" id="L184">		return SUCCESS;</span>
	}

	public String getAgentName() {
<span class="nc" id="L188">		return agentOrgName;</span>
	}

	public String getAgentOrgName() {
<span class="nc" id="L192">		return agentOrgName;</span>
	}

	public String getAgtOrgName() {
<span class="nc" id="L196">		return agtOrgName;</span>
	}

	public String getButtonValue() {
<span class="nc" id="L200">		return buttonValue;</span>
	}

	public String getDefPwtCommRate() {
<span class="nc" id="L204">		return defPwtCommRate;</span>
	}

	public String getDefSaleCommRate() {
<span class="nc" id="L208">		return defSaleCommRate;</span>
	}

	public String getGameName() {
<span class="nc" id="L212">		return gameName;</span>
	}

	public String getGamestatus() {
<span class="nc" id="L216">		return gamestatus;</span>
	}

	public String getGameStatus() {
<span class="nc" id="L220">		return gameStatus;</span>
	}

	public String getGametype() {
<span class="nc" id="L224">		return gametype;</span>
	}

	public String getGname() {
<span class="nc" id="L228">		return gname;</span>
	}

	public String getOrgType() {
<span class="nc" id="L232">		return orgType;</span>
	}

	public String getPwtCommVar() {
<span class="nc" id="L236">		return pwtCommVar;</span>
	}

	public String getRetailerOrgName() {
<span class="nc" id="L240">		return retailerOrgName;</span>
	}

	public String getSaleCommVar() {
<span class="nc" id="L244">		return saleCommVar;</span>
	}

	public String getServiceName() {
<span class="nc" id="L248">		return serviceName;</span>
	}

	public void setAgentName(String agentOrgName) {
<span class="nc" id="L252">		this.agentOrgName = agentOrgName;</span>
<span class="nc" id="L253">	}</span>

	public void setAgentOrgName(String agentOrgName) {
<span class="nc" id="L256">		this.agentOrgName = agentOrgName;</span>
<span class="nc" id="L257">	}</span>

	public void setAgtOrgName(String agtOrgName) {
<span class="nc" id="L260">		this.agtOrgName = agtOrgName;</span>
<span class="nc" id="L261">	}</span>

	public void setButtonValue(String buttonValue) {
<span class="nc" id="L264">		this.buttonValue = buttonValue;</span>
<span class="nc" id="L265">	}</span>

	public void setDefPwtCommRate(String defPwtCommRate) {
<span class="nc" id="L268">		this.defPwtCommRate = defPwtCommRate;</span>
<span class="nc" id="L269">	}</span>

	public void setDefSaleCommRate(String defSaleCommRate) {
<span class="nc" id="L272">		this.defSaleCommRate = defSaleCommRate;</span>
<span class="nc" id="L273">	}</span>

	public void setGameName(String gameName) {
<span class="nc" id="L276">		this.gameName = gameName;</span>
<span class="nc" id="L277">	}</span>

	public void setGamestatus(String gamestatus) {
<span class="nc" id="L280">		this.gamestatus = gamestatus;</span>
<span class="nc" id="L281">	}</span>

	public void setGameStatus(String gameStatus) {
<span class="nc" id="L284">		this.gameStatus = gameStatus;</span>
<span class="nc" id="L285">	}</span>

	public void setGametype(String gametype) {
<span class="nc" id="L288">		this.gametype = gametype;</span>
<span class="nc" id="L289">	}</span>

	public void setGname(String gname) {
<span class="nc" id="L292">		this.gname = gname;</span>
<span class="nc" id="L293">	}</span>

	public void setOrgType(String orgType) {
<span class="nc" id="L296">		this.orgType = orgType;</span>
<span class="nc" id="L297">	}</span>

	public void setPwtCommVar(String pwtCommVar) {
<span class="nc" id="L300">		this.pwtCommVar = pwtCommVar;</span>
		// if(&quot;&quot;.equalsIgnoreCase(this.pwtCommVar.trim()))
		// this.pwtCommVar=&quot;0.00&quot;;
<span class="nc" id="L303">	}</span>

	public void setRetailerOrgName(String retailerOrgName) {
<span class="nc" id="L306">		this.retailerOrgName = retailerOrgName;</span>
<span class="nc" id="L307">	}</span>

	public void setSaleCommVar(String saleCommVar) {
<span class="nc" id="L310">		this.saleCommVar = saleCommVar;</span>
		// if(&quot;&quot;.equalsIgnoreCase(this.saleCommVar.trim()))
		// this.saleCommVar=&quot;0.00&quot;;
<span class="nc" id="L313">	}</span>

	public String getDefWidCommRate() {
<span class="nc" id="L316">		return defWidCommRate;</span>
	}

	public void setDefWidCommRate(String defWidCommRate) {
<span class="nc" id="L320">		this.defWidCommRate = defWidCommRate;</span>
<span class="nc" id="L321">	}</span>

	public String getDefDepCommRate() {
<span class="nc" id="L324">		return defDepCommRate;</span>
	}

	public void setDefDepCommRate(String defDepCommRate) {
<span class="nc" id="L328">		this.defDepCommRate = defDepCommRate;</span>
<span class="nc" id="L329">	}</span>

	public String getDefNetGCommRate() {
<span class="nc" id="L332">		return defNetGCommRate;</span>
	}

	public void setDefNetGCommRate(String defNetGCommRate) {
<span class="nc" id="L336">		this.defNetGCommRate = defNetGCommRate;</span>
<span class="nc" id="L337">	}</span>

	public String getDepCommVar() {
<span class="nc" id="L340">		return depCommVar;</span>
	}

	public void setDepCommVar(String depCommVar) {
<span class="nc" id="L344">		this.depCommVar = depCommVar;</span>
<span class="nc" id="L345">	}</span>

	public String getNetGCommVar() {
<span class="nc" id="L348">		return netGCommVar;</span>
	}

	public void setNetGCommVar(String netGCommVar) {
<span class="nc" id="L352">		this.netGCommVar = netGCommVar;</span>
<span class="nc" id="L353">	}</span>

	public String getWidCommVar() {
<span class="nc" id="L356">		return widCommVar;</span>
	}

	public void setWidCommVar(String widCommVar) {
<span class="nc" id="L360">		this.widCommVar = widCommVar;</span>
<span class="nc" id="L361">	}</span>

	public void setServiceName(String serviceName) {
<span class="nc" id="L364">		this.serviceName = serviceName;</span>
<span class="nc" id="L365">	}</span>

	public void setServletRequest(HttpServletRequest req) {
<span class="nc" id="L368">		this.request = req;</span>
<span class="nc" id="L369">	}</span>

	public void setServletResponse(HttpServletResponse res) {
<span class="nc" id="L372">		this.response = res;</span>

<span class="nc" id="L374">	}</span>

	public void submitUpdatedAllValue() {
<span class="nc" id="L377">		logger.debug(&quot; agtOrgName=&quot; + agtOrgName + &quot;  gameStatus=&quot; + gameStatus</span>
				+ &quot;  saleCommVar=&quot; + saleCommVar + &quot; pwtCommVar=&quot; + pwtCommVar);
<span class="nc" id="L379">		System.out.println(&quot; agtOrgName=&quot; + agtOrgName + &quot;  gameStatus=&quot;</span>
				+ gameStatus + &quot;  saleCommVar=&quot; + saleCommVar + &quot; pwtCommVar=&quot;
				+ pwtCommVar);
<span class="nc" id="L382">		PrintWriter out = null;</span>
		try {
<span class="nc" id="L384">			AgentSalePWTCommVarianceHelper helper = new AgentSalePWTCommVarianceHelper();</span>
<span class="nc" id="L385">			System.out.println(&quot;called......&quot;);</span>
<span class="nc" id="L386">			Map&lt;String, Double&gt; map = helper.getDefaultCommRateForAll();</span>
<span class="nc" id="L387">			String flag = null;</span>
<span class="nc" id="L388">			double maxSaleValue = map.get(&quot;maxSaleVariance&quot;);</span>
<span class="nc" id="L389">			double minSaleRate = map.get(&quot;minSaleCommVar&quot;);</span>
<span class="nc" id="L390">			double minSaleCommValue = minSaleRate</span>
					+ Double.parseDouble(saleCommVar);
<span class="nc" id="L392">			logger.debug(&quot;max value is : &quot; + maxSaleValue);</span>
<span class="nc" id="L393">			System.out.println(&quot;max value is : &quot; + maxSaleValue);</span>

<span class="nc bnc" id="L395" title="All 4 branches missed.">			if (Double.parseDouble(saleCommVar) &lt; maxSaleValue</span>
					&amp;&amp; minSaleCommValue &gt;= 0) {
<span class="nc" id="L397">				flag = helper.submitUpdatedAllValue(agtOrgName.replace(&quot;amp&quot;,</span>
						&quot;&amp;&quot;), gameStatus, saleCommVar, pwtCommVar);
			}

<span class="nc" id="L401">			out = response.getWriter();</span>
<span class="nc bnc" id="L402" title="All 2 branches missed.">			if (flag == null) {</span>
<span class="nc" id="L403">				out.print(&quot;pbm:Sale Commission Variance must be less than &quot;</span>
						+ maxSaleValue);
<span class="nc bnc" id="L405" title="All 2 branches missed.">			} else if (minSaleCommValue &lt; 0) {</span>
<span class="nc" id="L406">				out</span>
						.print(&quot;Calculated Net Comm Variance is Negetive. Please Enter Another Value in Sale Comm Variance.&quot;);
<span class="nc bnc" id="L408" title="All 2 branches missed.">			} else if (&quot;SUCCESS&quot;.equalsIgnoreCase(flag)) {</span>
<span class="nc" id="L409">				out.print(&quot;successfully updated&quot;);</span>
<span class="nc bnc" id="L410" title="All 2 branches missed.">			} else if (&quot;SAME_VALUES&quot;.equalsIgnoreCase(flag)) {</span>
<span class="nc" id="L411">				out</span>
						.print(&quot;You Must Upadate Sale Or PWT Commission Variance Value&quot;);
			} else {
<span class="nc" id="L414">				out.print(&quot;Some Internal Error occurred&quot;);</span>
			}
<span class="nc" id="L416">		} catch (Exception e) {</span>
<span class="nc bnc" id="L417" title="All 2 branches missed.">			if (out != null) {</span>
<span class="nc" id="L418">				out.print(&quot;Some Internal Error occurred&quot;);</span>
			}
<span class="nc" id="L420">			e.printStackTrace();</span>
<span class="nc" id="L421">		}</span>
<span class="nc" id="L422">	}</span>

	public void submitUpdatedValue() {
<span class="nc" id="L425">		logger.info(&quot;Inside submitUpdatedValue()&quot;);</span>
<span class="nc" id="L426">		logger.debug(&quot;agtOrgName=&quot; + agtOrgName.replace(&quot;'&quot;, &quot;&quot;) + &quot; gname=&quot;</span>
				+ gname + &quot;  defSaleCommRate=&quot; + defSaleCommRate
				+ &quot;saleCommVar=&quot; + saleCommVar + &quot; defPwtCommRate=&quot;
				+ defPwtCommRate + &quot; pwtCommVar=&quot; + pwtCommVar
				+ &quot; serviceName =&quot; + serviceName + &quot; orgType =&quot; + orgType);
<span class="nc" id="L431">		System.out.println(&quot;agtOrgName=&quot; + agtOrgName.replace(&quot;'&quot;, &quot;&quot;)</span>
				+ &quot; gname=&quot; + gname + &quot;  defSaleCommRate=&quot; + defSaleCommRate
				+ &quot;saleCommVar=&quot; + saleCommVar + &quot; defPwtCommRate=&quot;
				+ defPwtCommRate + &quot; pwtCommVar=&quot; + pwtCommVar
				+ &quot; serviceName =&quot; + serviceName + &quot; orgType =&quot; + orgType);
<span class="nc" id="L436">		PrintWriter out = null;</span>
		try {
<span class="nc" id="L438">			AgentSalePWTCommVarianceHelper helper = new AgentSalePWTCommVarianceHelper();</span>
<span class="nc" id="L439">			System.out.println(&quot;called......&quot;);</span>
<span class="nc" id="L440">			String game[] = null;</span>

<span class="nc bnc" id="L442" title="All 2 branches missed.">			if (serviceName.equalsIgnoreCase(&quot;SE&quot;)) {</span>
<span class="nc" id="L443">				 game = gname.split(&quot;-&quot;);</span>
<span class="nc" id="L444">				Map&lt;String, Double&gt; map = helper.getDefaultCommRate(game[0],</span>
						game[1]);
<span class="nc" id="L446">				double maxSaleValue = map.get(&quot;maxSaleVariance&quot;);</span>
<span class="nc" id="L447">				double maxPwtVariance = map.get(&quot;maxPwtVariance&quot;);</span>
<span class="nc" id="L448">				logger.debug(&quot;max value is : &quot; + maxSaleValue);</span>
<span class="nc" id="L449">				System.out.println(&quot;max value is : &quot; + maxSaleValue);</span>
<span class="nc" id="L450">				logger.debug(&quot;serviceName  &quot; + serviceName);</span>
<span class="nc" id="L451">				System.out.println(&quot;serviceName  &quot; + serviceName);</span>
<span class="nc" id="L452">				String flag = null;</span>
<span class="nc bnc" id="L453" title="All 2 branches missed.">				if (!(Double.parseDouble(saleCommVar) &lt; maxSaleValue)) {</span>
<span class="nc" id="L454">					flag = &quot;SALE&quot;;</span>
				}
<span class="nc bnc" id="L456" title="All 2 branches missed.">				if (!(Double.parseDouble(pwtCommVar) &lt; maxPwtVariance)) {</span>
<span class="nc" id="L457">					flag = &quot;PWT&quot;;</span>
				}

<span class="nc bnc" id="L460" title="All 4 branches missed.">				if (Double.parseDouble(saleCommVar) &lt; maxSaleValue</span>
						&amp;&amp; Double.parseDouble(pwtCommVar) &lt; maxPwtVariance) {
<span class="nc" id="L462">					flag = helper.submitUpdatedValue(agtOrgName, gname, defSaleCommRate, saleCommVar,</span>
							defPwtCommRate, pwtCommVar);
				}

<span class="nc" id="L466">				out = response.getWriter();</span>
<span class="nc bnc" id="L467" title="All 2 branches missed.">				if (&quot;SALE&quot;.equalsIgnoreCase(flag)) {</span>
<span class="nc" id="L468">					out.print(&quot;SALE;&quot; + maxSaleValue);</span>
<span class="nc bnc" id="L469" title="All 2 branches missed.">				} else if (&quot;PWT&quot;.equalsIgnoreCase(flag)) {</span>
<span class="nc" id="L470">					out.print(&quot;PWT;&quot; + maxSaleValue);</span>
<span class="nc bnc" id="L471" title="All 2 branches missed.">				} else if (&quot;SUCCESS&quot;.equalsIgnoreCase(flag)) {</span>
<span class="nc" id="L472">					out.print(&quot;successfully updated&quot;);</span>
<span class="nc bnc" id="L473" title="All 2 branches missed.">				} else if (&quot;SAME_VALUES&quot;.equalsIgnoreCase(flag)) {</span>
<span class="nc" id="L474">					out</span>
							.print(&quot;You Must Upadate Sale Or PWT Commission Variance Value&quot;);
				} else {
<span class="nc" id="L477">					out.print(&quot;Some Internal Error occurred&quot;);</span>
				}
<span class="nc bnc" id="L479" title="All 2 branches missed.">			} else if (serviceName.equalsIgnoreCase(&quot;DG&quot;)) {</span>
<span class="nc" id="L480">				game = gname.split(&quot;-&quot;);</span>
<span class="nc" id="L481">				Map&lt;String, Double&gt; map = helper.getDefaultCommRateDg(game[0],</span>
						game[1]);
<span class="nc" id="L483">				double maxSaleValue = map.get(&quot;maxSaleVariance&quot;);</span>
<span class="nc" id="L484">				double maxPwtVariance = map.get(&quot;maxPwtVariance&quot;);</span>

<span class="nc" id="L486">				String flag = null;</span>
<span class="nc bnc" id="L487" title="All 2 branches missed.">				if (!(Double.parseDouble(saleCommVar) &lt; maxSaleValue)) {</span>
<span class="nc" id="L488">					flag = &quot;SALE&quot;;</span>
				}
<span class="nc bnc" id="L490" title="All 2 branches missed.">				if (!(Double.parseDouble(pwtCommVar) &lt; maxPwtVariance)) {</span>
<span class="nc" id="L491">					flag = &quot;PWT&quot;;</span>
				}

<span class="nc bnc" id="L494" title="All 4 branches missed.">				if (Double.parseDouble(saleCommVar) &lt; maxSaleValue</span>
						&amp;&amp; Double.parseDouble(pwtCommVar) &lt; maxPwtVariance) {
<span class="nc" id="L496">					flag = helper.submitUpdatedValueDg(agtOrgName, gname, defSaleCommRate, saleCommVar,</span>
							defPwtCommRate, pwtCommVar);
				}

<span class="nc" id="L500">				out = response.getWriter();</span>
<span class="nc bnc" id="L501" title="All 2 branches missed.">				if (&quot;SALE&quot;.equalsIgnoreCase(flag)) {</span>
<span class="nc" id="L502">					out.print(&quot;SALE;&quot; + maxSaleValue);</span>
<span class="nc bnc" id="L503" title="All 2 branches missed.">				} else if (&quot;PWT&quot;.equalsIgnoreCase(flag)) {</span>
<span class="nc" id="L504">					out.print(&quot;PWT;&quot; + maxPwtVariance);</span>
<span class="nc bnc" id="L505" title="All 2 branches missed.">				} else if (&quot;SUCCESS&quot;.equalsIgnoreCase(flag)) {</span>
<span class="nc" id="L506">					out.print(&quot;successfully updated&quot;);</span>
<span class="nc bnc" id="L507" title="All 2 branches missed.">				} else if (&quot;SAME_VALUES&quot;.equalsIgnoreCase(flag)) {</span>
<span class="nc" id="L508">					out</span>
							.print(&quot;You Must Upadate Sale Or PWT Commission Variance Value&quot;);
				} else {
<span class="nc" id="L511">					out.print(&quot;Some Internal Error occurred&quot;);</span>
				}

<span class="nc bnc" id="L514" title="All 2 branches missed.">			}else if (serviceName.equalsIgnoreCase(&quot;CS&quot;)) {</span>
<span class="nc" id="L515">				game = gname.split(&quot;_&quot;);</span>
<span class="nc" id="L516">				Map&lt;String, Double&gt; map = helper.getDefaultCommRateCS(game[0],</span>
						game[1], game[2]);
<span class="nc" id="L518">				double maxSaleValue = map.get(&quot;maxSaleVariance&quot;);</span>
<span class="nc" id="L519">				logger.debug(&quot;max value is : &quot; + maxSaleValue);</span>
<span class="nc" id="L520">				logger.debug(&quot;serviceName  &quot; + serviceName);</span>
<span class="nc" id="L521">				String flag = null;</span>
<span class="nc bnc" id="L522" title="All 2 branches missed.">				if (!(Double.parseDouble(saleCommVar) &lt; maxSaleValue)) {</span>
<span class="nc" id="L523">					flag = &quot;SALE&quot;;</span>
				}

<span class="nc bnc" id="L526" title="All 2 branches missed.">				if (Double.parseDouble(saleCommVar) &lt; maxSaleValue) {</span>
<span class="nc" id="L527">					flag = helper.submitUpdatedValueCS(agtOrgName, gname, defSaleCommRate, saleCommVar);</span>
				}

<span class="nc" id="L530">				out = response.getWriter();</span>
<span class="nc bnc" id="L531" title="All 2 branches missed.">				if (&quot;SALE&quot;.equalsIgnoreCase(flag)) {</span>
<span class="nc" id="L532">					out.print(&quot;SALE;&quot; + maxSaleValue);</span>
<span class="nc bnc" id="L533" title="All 2 branches missed.">				} else if (&quot;SUCCESS&quot;.equalsIgnoreCase(flag)) {</span>
<span class="nc" id="L534">					out.print(&quot;successfully updated&quot;);</span>
<span class="nc bnc" id="L535" title="All 2 branches missed.">				} else if (&quot;SAME_VALUES&quot;.equalsIgnoreCase(flag)) {</span>
<span class="nc" id="L536">					out.print(&quot;You Must Upadate Sale Commission Variance Value&quot;);</span>
				} else {
<span class="nc" id="L538">					out.print(&quot;Some Internal Error occurred&quot;);</span>
				}
<span class="nc bnc" id="L540" title="All 2 branches missed.">			}else if(serviceName.equalsIgnoreCase(&quot;OLA&quot;)){</span>

<span class="nc" id="L542">				game = gname.split(&quot;-&quot;);</span>
<span class="nc" id="L543">				Map&lt;String, Double&gt; map = helper.getDefaultCommRateForOLA(game[0],</span>
						game[1]);
<span class="nc" id="L545">				double maxWidVariance = map.get(&quot;maxWidVariance&quot;);</span>
<span class="nc" id="L546">				double maxDepVariance = map.get(&quot;maxDepVariance&quot;);</span>
<span class="nc" id="L547">				double maxNetGVariance = map.get(&quot;maxNetGVariance&quot;);</span>

<span class="nc" id="L549">				String flag = null;</span>
<span class="nc bnc" id="L550" title="All 2 branches missed.">				if (!(Double.parseDouble(widCommVar) &lt; maxWidVariance)) {</span>
<span class="nc" id="L551">					flag = &quot;WITHDRAWAL&quot;;</span>
				}
<span class="nc bnc" id="L553" title="All 2 branches missed.">				if (!(Double.parseDouble(depCommVar) &lt; maxDepVariance)) {</span>
<span class="nc" id="L554">					flag = &quot;DEPOSIT&quot;;</span>
				}
<span class="nc bnc" id="L556" title="All 2 branches missed.">				if (!(Double.parseDouble(netGCommVar) &lt; maxNetGVariance)) {</span>
<span class="nc" id="L557">					flag = &quot;NET GAMING&quot;;</span>
				}

<span class="nc bnc" id="L560" title="All 6 branches missed.">				if (Double.parseDouble(widCommVar) &lt; maxWidVariance</span>
						&amp;&amp; Double.parseDouble(depCommVar) &lt; maxDepVariance
						&amp;&amp; Double.parseDouble(netGCommVar) &lt; maxNetGVariance) {
<span class="nc" id="L563">					flag = helper.submitUpdatedValueOLA(agtOrgName, gname, defWidCommRate, widCommVar,</span>
							defDepCommRate, depCommVar, defNetGCommRate, netGCommVar);
				}

<span class="nc" id="L567">				out = response.getWriter();</span>
<span class="nc bnc" id="L568" title="All 2 branches missed.">				if (&quot;WITHDRAWAL&quot;.equalsIgnoreCase(flag)) {</span>
<span class="nc" id="L569">					out.print(&quot;WITHDRAWAL;&quot; + maxWidVariance);</span>
<span class="nc bnc" id="L570" title="All 2 branches missed.">				} else if (&quot;DEPOSIT&quot;.equalsIgnoreCase(flag)) {</span>
<span class="nc" id="L571">					out.print(&quot;DEPOSIT;&quot; + maxDepVariance);</span>
<span class="nc bnc" id="L572" title="All 2 branches missed.">				} else if (&quot;NET GAMING&quot;.equalsIgnoreCase(flag)){</span>
<span class="nc" id="L573">					out.print(&quot;NET GAMING;&quot; + maxNetGVariance);</span>
<span class="nc bnc" id="L574" title="All 2 branches missed.">				} else if (&quot;SUCCESS&quot;.equalsIgnoreCase(flag)) {</span>
<span class="nc" id="L575">					out.print(&quot;successfully updated&quot;);</span>
<span class="nc bnc" id="L576" title="All 2 branches missed.">				} else if (&quot;SAME_VALUES&quot;.equalsIgnoreCase(flag)) {</span>
<span class="nc" id="L577">					out</span>
							.print(&quot;You Must Upadate Any One Of Commission Variance Value&quot;);
				} else {
<span class="nc" id="L580">					out.print(&quot;Some Internal Error occurred&quot;);</span>
				}

			
<span class="nc bnc" id="L584" title="All 2 branches missed.">			} else if (&quot;IW&quot;.equals(serviceName)) {</span>
<span class="nc" id="L585">				game = gname.split(&quot;-&quot;);</span>
<span class="nc" id="L586">				Map&lt;String, Double&gt; map = helper.getDefaultCommRateIW(game[0], game[1]);</span>
<span class="nc" id="L587">				double maxSaleValue = map.get(&quot;maxSaleVariance&quot;);</span>
<span class="nc" id="L588">				double maxPwtVariance = map.get(&quot;maxPwtVariance&quot;);</span>

<span class="nc" id="L590">				String flag = null;</span>
<span class="nc bnc" id="L591" title="All 2 branches missed.">				if (!(Double.parseDouble(saleCommVar) &lt; maxSaleValue)) {</span>
<span class="nc" id="L592">					flag = &quot;SALE&quot;;</span>
				}
<span class="nc bnc" id="L594" title="All 2 branches missed.">				if (!(Double.parseDouble(pwtCommVar) &lt; maxPwtVariance)) {</span>
<span class="nc" id="L595">					flag = &quot;PWT&quot;;</span>
				}

<span class="nc bnc" id="L598" title="All 4 branches missed.">				if (Double.parseDouble(saleCommVar) &lt; maxSaleValue &amp;&amp; Double.parseDouble(pwtCommVar) &lt; maxPwtVariance) {</span>
<span class="nc" id="L599">					flag = helper.submitUpdatedValueIW(agtOrgName, gname, defSaleCommRate, saleCommVar, defPwtCommRate, pwtCommVar);</span>
				}

<span class="nc" id="L602">				out = response.getWriter();</span>
<span class="nc bnc" id="L603" title="All 2 branches missed.">				if (&quot;SALE&quot;.equalsIgnoreCase(flag)) {</span>
<span class="nc" id="L604">					out.print(&quot;SALE;&quot; + maxSaleValue);</span>
<span class="nc bnc" id="L605" title="All 2 branches missed.">				} else if (&quot;PWT&quot;.equalsIgnoreCase(flag)) {</span>
<span class="nc" id="L606">					out.print(&quot;PWT;&quot; + maxPwtVariance);</span>
<span class="nc bnc" id="L607" title="All 2 branches missed.">				} else if (&quot;SUCCESS&quot;.equalsIgnoreCase(flag)) {</span>
<span class="nc" id="L608">					out.print(&quot;successfully updated&quot;);</span>
<span class="nc bnc" id="L609" title="All 2 branches missed.">				} else if (&quot;SAME_VALUES&quot;.equalsIgnoreCase(flag)) {</span>
<span class="nc" id="L610">					out.print(&quot;You Must Upadate Sale Or PWT Commission Variance Value&quot;);</span>
				} else {
<span class="nc" id="L612">					out.print(&quot;Some Internal Error occurred&quot;);</span>
				}

			}

<span class="nc" id="L617">		} catch (Exception e) {</span>
<span class="nc bnc" id="L618" title="All 2 branches missed.">			if (out != null) {</span>
<span class="nc" id="L619">				out.print(&quot;Some Internal Error occurred&quot;);</span>
			}
<span class="nc" id="L621">			e.printStackTrace();</span>
<span class="nc" id="L622">		}</span>
<span class="nc" id="L623">	}</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.7.201606060606</span></div></body></html>