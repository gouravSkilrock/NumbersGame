<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>RMSSaleImpl.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">lms</a> &gt; <a href="index.source.html" class="el_package">com.skilrock.lms.coreEngine.commercialService.common</a> &gt; <span class="el_source">RMSSaleImpl.java</span></div><h1>RMSSaleImpl.java</h1><pre class="source lang-java linenums">package com.skilrock.lms.coreEngine.commercialService.common;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
//import org.codehaus.xfire.transport.http.XFireServletController;

import com.skilrock.lms.beans.CSLoginBean;
import com.skilrock.lms.beans.CSOrgBean;
import com.skilrock.lms.beans.CSSaleBean;

//Generated by MyEclipse

<span class="nc" id="L13">public class RMSSaleImpl implements IRMSSale {</span>
<span class="nc" id="L14">	static Log logger = LogFactory.getLog(RMSSaleImpl.class);</span>
		
	public CSSaleBean saleOperation(String userName, int retOrgId,
			double balance, String prodCode, double unitPrice, int multiple,
			double mrpAmt, double netAmt, int CSRefTxId, int RMSRefId,
			CSOrgBean orgBean, String authCode, String status, int ErrorCode) {
		
		/*HttpSession session = XFireServletController.getRequest().getSession();
		if(session == null){
			
		}else{
			if(((String)session.getServletContext().getAttribute(&quot;ALLOWED IP&quot;)).equalsIgnoreCase(XFireServletController.getRequest().getRemoteHost()));
		}*/
		
		//System.out.println(&quot;This is client IP: &quot;+XFireServletController.getRequest().getRemoteHost());
<span class="nc" id="L29">		CSSaleBean saleBean = new CSSaleBean();</span>
<span class="nc" id="L30">		logger.debug(&quot;Sale Operation Request:--- Date:&quot; + new java.util.Date()</span>
				+ &quot;, userName: &quot; + userName + &quot;, retailer Org Id: &quot; + retOrgId
				+ &quot;, balance: &quot; + balance + &quot;, product Code: &quot; + prodCode
				+ &quot;, unitPrice: &quot; + unitPrice + &quot;, multiple: &quot; + multiple
				+ &quot;, MRP Amt: &quot; + mrpAmt + &quot;, Net Amt: &quot; + netAmt
				+ &quot;, CS Ref.Tx.Id: &quot; + CSRefTxId + &quot;, RMS Ref.Id: &quot; + RMSRefId
				+ &quot;, OrgBean: &quot; + orgBean + &quot;, AuthCode: &quot; + authCode
				+ &quot;, Status: &quot; + status + &quot;, ErrorCode: &quot; + ErrorCode);
<span class="nc" id="L38">		saleBean.setUserName(userName);</span>
<span class="nc" id="L39">		saleBean.setRetOrgId(retOrgId); // BLANK IN REQUEST</span>
<span class="nc" id="L40">		saleBean.setBalance(balance);</span>
<span class="nc" id="L41">		saleBean.setProdCode(prodCode);</span>
<span class="nc" id="L42">		saleBean.setUnitPrice(unitPrice);</span>
<span class="nc" id="L43">		saleBean.setMult(multiple);</span>
<span class="nc" id="L44">		saleBean.setMrpAmt(mrpAmt);</span>
<span class="nc" id="L45">		saleBean.setNetAmt(netAmt); // BLANK IN REQUEST</span>
<span class="nc" id="L46">		saleBean.setCSRefTxId(CSRefTxId);</span>
<span class="nc" id="L47">		saleBean.setRMSRefId(RMSRefId); // BLANK IN REQUEST</span>
<span class="nc" id="L48">		saleBean.setOrgBean(orgBean); // BLANK IN REQUEST</span>
<span class="nc" id="L49">		saleBean.setAuthCode(authCode);</span>
<span class="nc" id="L50">		CSSaleTransactionsHelper helper = new CSSaleTransactionsHelper();</span>
<span class="nc" id="L51">		saleBean = helper.CommServSaleBalDeduction(saleBean);</span>
<span class="nc" id="L52">		logger.debug(&quot;Sale Operation Response:--- Date:&quot; + new java.util.Date()</span>
				+ &quot; userName: &quot; + saleBean.getUserName()
				+ &quot;, retailer Org Id: &quot; + saleBean.getRetOrgId()
				+ &quot;, balance: &quot; + saleBean.getBalance() + &quot;, product Code: &quot;
				+ saleBean.getProdCode() + &quot;, unitPrice: &quot;
				+ saleBean.getUnitPrice() + &quot;, multiple: &quot; + saleBean.getMult()
				+ &quot;, MRP Amt: &quot; + saleBean.getMrpAmt() + &quot;, Net Amt: &quot;
				+ saleBean.getNetAmt() + &quot;, CS Ref.Tx.Id: &quot;
				+ saleBean.getCSRefTxId() + &quot;, RMS Ref.Id: &quot;
				+ saleBean.getRMSRefId() + &quot;,AuthCode: &quot;
				+ saleBean.getAuthCode() + &quot;, Status: &quot; + saleBean.getStatus()
				+ &quot;, ErrorCode: &quot; + saleBean.getErrorCode());
<span class="nc" id="L64">		return saleBean;</span>
	}

	public CSSaleBean saleCancelOperation(int retOrgId, double balance,
			int CSRefTxIdForRefund, int RMSRefIdForRefund, int CSRefTxId,
			int RMSRefId, String authCode, String Status, int ErrorCode,
			String reasonForCancel) {
<span class="nc" id="L71">		logger.debug(&quot;SaleCancel Operation Request:--- Date:&quot;</span>
				+ new java.util.Date() + &quot;, retailer Org Id: &quot; + retOrgId
				+ &quot;, balance: &quot; + balance + &quot;, CS Ref.Tx.For Refund: &quot;
				+ CSRefTxIdForRefund + &quot;, RMS Ref.Id For Refund: &quot;
				+ RMSRefIdForRefund + &quot;, CS Ref.Tx.Id: &quot; + CSRefTxId
				+ &quot;, RMS Ref.Id: &quot; + RMSRefId + &quot;, AuthCode: &quot; + authCode
				+ &quot;, Status: &quot; + Status + &quot;, ErrorCode: &quot; + ErrorCode);
<span class="nc" id="L78">		CSSaleBean saleBean = new CSSaleBean();</span>
<span class="nc" id="L79">		saleBean.setRetOrgId(retOrgId); // BLANK IN REQUEST</span>
<span class="nc" id="L80">		saleBean.setBalance(balance);</span>
<span class="nc" id="L81">		saleBean.setCSRefTxIdForRefund(CSRefTxIdForRefund);</span>
<span class="nc" id="L82">		saleBean.setRMSRefIdForRefund(RMSRefIdForRefund);</span>
<span class="nc" id="L83">		saleBean.setCSRefTxId(CSRefTxId);</span>
<span class="nc" id="L84">		saleBean.setRMSRefId(RMSRefId);</span>
<span class="nc" id="L85">		saleBean.setAuthCode(authCode);</span>
<span class="nc" id="L86">		saleBean.setReasonForCancel(reasonForCancel);</span>
<span class="nc" id="L87">		CSSaleTransactionsHelper helper = new CSSaleTransactionsHelper();</span>
<span class="nc" id="L88">		saleBean = helper.CommServSaleRefund(saleBean);</span>
<span class="nc" id="L89">		logger.debug(&quot;SaleCancel Operation Response:--- Date:&quot;</span>
				+ new java.util.Date() + &quot;, retailer Org Id: &quot;
				+ saleBean.getRetOrgId() + &quot;, balance: &quot;
				+ saleBean.getBalance() + &quot;, CS Ref.Tx.For Refund: &quot;
				+ saleBean.getCSRefTxIdForRefund()
				+ &quot;, RMS Ref.Id For Refund: &quot; + saleBean.getRMSRefIdForRefund()
				+ &quot;, CS Ref.Tx.Id: &quot; + saleBean.getCSRefTxId()
				+ &quot;, RMS Ref.Id: &quot; + saleBean.getRMSRefId() + &quot;, AuthCode: &quot;
				+ saleBean.getAuthCode() + &quot;, Status: &quot; + saleBean.getStatus()
				+ &quot;, ErrorCode: &quot; + saleBean.getErrorCode());
<span class="nc" id="L99">		return saleBean;</span>
	}

	public CSLoginBean terminalLoginOperation(String userName, double balance) {
<span class="nc" id="L103">		logger.debug(&quot;Login Operation Request:--- Date:&quot; + new java.util.Date()</span>
				+ &quot;, UserName: &quot; + userName + &quot;, Balance&quot; + balance);
<span class="nc" id="L105">		CSLoginBean loginBean = new CSLoginBean();</span>
<span class="nc" id="L106">		loginBean.setUserName(userName);</span>
<span class="nc" id="L107">		loginBean.setBalance(balance);</span>
<span class="nc" id="L108">		CSTerminalHelper helper = new CSTerminalHelper();</span>
<span class="nc" id="L109">		loginBean = helper.getBalanceForTerminal(loginBean);</span>
<span class="nc" id="L110">		logger.debug(&quot;Login Operation Response:--- Date:&quot;</span>
				+ new java.util.Date() + &quot;, UserName: &quot;
				+ loginBean.getUserName() + &quot;, Balance&quot;
				+ loginBean.getBalance());
<span class="nc" id="L114">		return loginBean;</span>
	}

	public CSLoginBean terminalReprintAuthOperation(String userName,
			int CSRefTxId, int RMSRefId, String authCode, String status,
			int errorCode) {
<span class="nc" id="L120">		logger.debug(&quot;ReprintAuth Operation Request:--- Date:&quot;</span>
				+ new java.util.Date() + &quot;UserName: &quot; + userName
				+ &quot;, CSRefTxId: &quot; + CSRefTxId + &quot;, RMSRefId: &quot; + RMSRefId
				+ &quot;, AuthCode:&quot; + authCode + &quot;, Status:&quot; + status
				+ &quot;, ErrorCode:&quot; + errorCode);
<span class="nc" id="L125">		CSLoginBean loginBean = new CSLoginBean();</span>
<span class="nc" id="L126">		loginBean.setUserName(userName);</span>
<span class="nc" id="L127">		loginBean.setCSRefTxId(CSRefTxId);</span>
<span class="nc" id="L128">		loginBean.setRMSRefTxId(RMSRefId);</span>
<span class="nc" id="L129">		loginBean.setAuthCode(authCode);</span>
<span class="nc" id="L130">		loginBean.setStatus(status);</span>
<span class="nc" id="L131">		loginBean.setErrorCode(errorCode);</span>
<span class="nc" id="L132">		CSTerminalHelper helper = new CSTerminalHelper();</span>
<span class="nc" id="L133">		loginBean = helper.getReprintAuthorization(loginBean);</span>
<span class="nc" id="L134">		logger.debug(&quot;ReprintAuth Operation Response:--- Date:&quot;</span>
				+ new java.util.Date() + &quot;UserName: &quot; + loginBean.getUserName()
				+ &quot;, CSRefTxId: &quot; + loginBean.getCSRefTxId() + &quot;, RMSRefId: &quot;
				+ loginBean.getRMSRefTxId() + &quot;, AuthCode:&quot;
				+ loginBean.getAuthCode() + &quot;, Status:&quot; + loginBean.getStatus()
				+ &quot;, ErrorCode:&quot; + loginBean.getErrorCode());
<span class="nc" id="L140">		return loginBean;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.7.201606060606</span></div></body></html>