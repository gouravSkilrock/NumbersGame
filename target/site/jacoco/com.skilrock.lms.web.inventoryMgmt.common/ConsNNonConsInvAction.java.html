<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ConsNNonConsInvAction.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">lms</a> &gt; <a href="index.source.html" class="el_package">com.skilrock.lms.web.inventoryMgmt.common</a> &gt; <span class="el_source">ConsNNonConsInvAction.java</span></div><h1>ConsNNonConsInvAction.java</h1><pre class="source lang-java linenums">package com.skilrock.lms.web.inventoryMgmt.common;

import java.io.IOException;
import java.io.PrintWriter;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Map;
import java.util.TreeMap;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.apache.struts2.interceptor.ServletRequestAware;
import org.apache.struts2.interceptor.ServletResponseAware;

import com.opensymphony.xwork2.ActionSupport;
import com.skilrock.lms.beans.ConsNNonConsBean;
import com.skilrock.lms.beans.InvDetailBean;
import com.skilrock.lms.beans.UserInfoBean;
import com.skilrock.lms.common.exception.LMSException;
import com.skilrock.lms.coreEngine.inventoryMgmt.ConsNNonConsInvHelper;
import com.skilrock.lms.coreEngine.userMgmt.common.CommonFunctionsHelper;
import com.skilrock.lms.coreEngine.userMgmt.common.OrgNUserRegHelper;

<span class="nc" id="L33">public class ConsNNonConsInvAction extends ActionSupport implements</span>
		ServletRequestAware, ServletResponseAware {

<span class="nc" id="L36">	static Log logger = LogFactory.getLog(ConsNNonConsInvAction.class);</span>
	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;
	private String addType;
	private int agtOrgId;
	private int brandId;

	// These text fields are used to hold data for create new inventory
	private String[] brandIdForModel;

	private String brandsId;
	// These text fields are used to hold data for create new Brand
	private String consAddType;
	private int[] consInvId;
	private int[] consModelId;
	private int[] consQty;
	private double cost;

	private double[] costPerUnit;
	private Integer count;
<span class="nc" id="L58">	private String end = null;</span>

	private int invId;
	// These text fields are used to hold data for create new Brand
	private int[] invIdForBrand;
	private int[] invIdForModel;
	private int[] invIdForModSpec;

	private String[] invImg;
	private String invType;
	private String isNew;
	private String modelId;
	private String[] newBrandDesc;
	private String[] newBrandName;
	private String[] newInvDesc;

	// These text fields are used to hold data for create new inventory
	private String[] newInvName;

	private String[] newModelDesc;

	private String[] newModelName;

	private String[] newModSpecDesc;
	private int[] nonConsBrandId;
	private int[] nonConsInvId;

	private int[] nonConsModelId;

	private int orgId;
	private int ownerId;
	private String ownerType;
	private String quantity;

	private HttpServletRequest request;

	private HttpServletResponse response;

	// methods added by amit for agent end ...

	private String retInvDet;

	private int retOrgId;

	private String searchResultsAvailable;

	private String serNo[];

	private String serNoFileName;

	private HttpSession session;

	private String sign;

	private String[] specType;
	private String[] specUnit;
	private String[] specValue;
<span class="nc" id="L115">	private int start = 0;</span>
	private String termId;
	private String ownerName;

	private String[] isReqOnReg;
	private String[] checkBindingLength;

<span class="nc" id="L122">	private Map&lt;String, String&gt; brandMap = null;</span>
<span class="nc" id="L123">	private Map&lt;String, String&gt; modelMap = null;</span>
<span class="nc" id="L124">	private Map&lt;String, String&gt; invMap = null;</span>
<span class="nc" id="L125">	private Map&lt;String, String&gt; bindingLengthMap = null;</span>
<span class="nc" id="L126">	private Map&lt;String, String&gt; invCodeMap = null;</span>
	private String bind_len;

	private String invCode[];
	private String invSrNo;

	/**
	 * This Method is Used to Add new Inventory type and Their Brand and Model.
	 * for Consumable or Non Consumable Devices.
	 * 
	 * @throws LMSException
	 */
	public String addNewInv() throws LMSException {
<span class="nc" id="L139">		ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
<span class="nc" id="L140">		String invUpdatedList = null;</span>
<span class="nc" id="L141">		System.out.println(invType);</span>
<span class="nc bnc" id="L142" title="All 2 branches missed.">		if (&quot;NON_CONS&quot;.equalsIgnoreCase(invType)) {</span>
<span class="nc bnc" id="L143" title="All 2 branches missed.">			if (&quot;ADD_INV&quot;.equalsIgnoreCase(addType)) {</span>
<span class="nc" id="L144">				invUpdatedList = helper.addNewInvDetails(&quot;NON_CONS&quot;,</span>
						newInvName, newInvDesc, invImg);
<span class="nc bnc" id="L146" title="All 2 branches missed.">			} else if (&quot;ADD_BRAND&quot;.equalsIgnoreCase(addType)) {</span>
<span class="nc" id="L147">				invUpdatedList = helper.addNewBrandDetails(invIdForBrand,</span>
						newBrandName, newBrandDesc);
<span class="nc" id="L149">				System.out.println(&quot;invUpdatedList 11111 &quot; + invUpdatedList);</span>
<span class="nc bnc" id="L150" title="All 2 branches missed.">			} else if (&quot;ADD_MODEL&quot;.equalsIgnoreCase(addType)) {</span>
<span class="nc" id="L151">				invUpdatedList = helper.addNewModelDetails(invIdForModel,</span>
						brandIdForModel, newModelName, newModelDesc,
						isReqOnReg, checkBindingLength);
			}
<span class="nc bnc" id="L155" title="All 2 branches missed.">		} else if (&quot;CONS&quot;.equalsIgnoreCase(invType)) {</span>
<span class="nc bnc" id="L156" title="All 2 branches missed.">			if (&quot;ADD_INV&quot;.equalsIgnoreCase(consAddType)) {</span>
<span class="nc" id="L157">				invUpdatedList = helper.addNewInvDetails(&quot;CONS&quot;, newInvName,</span>
						newInvDesc, invImg);
<span class="nc bnc" id="L159" title="All 2 branches missed.">			} else if (&quot;ADD_MODEL_SPEC&quot;.equalsIgnoreCase(consAddType)) {</span>
<span class="nc" id="L160">				invUpdatedList = helper.addNewInvSpec(invIdForModSpec,</span>
						specType, specUnit, specValue, costPerUnit,
						newModSpecDesc);
<span class="nc" id="L163">				System.out.println(&quot;invUpdatedList &quot; + invUpdatedList);</span>

			}
		}

<span class="nc" id="L168">		session = request.getSession();</span>
<span class="nc" id="L169">		session.setAttribute(&quot;invListMsg&quot;, invUpdatedList.substring(0,</span>
				invUpdatedList.indexOf(&quot;||&quot;)));
<span class="nc" id="L171">		session.setAttribute(&quot;invListMsg1&quot;, invUpdatedList</span>
				.substring(invUpdatedList.indexOf(&quot;||&quot;) + 2));

<span class="nc" id="L174">		return SUCCESS;</span>
	}

	public String agtNonConsInvReturn() throws LMSException {
<span class="nc" id="L178">		session = request.getSession();</span>
<span class="nc" id="L179">		UserInfoBean userInfoBean = (UserInfoBean) session</span>
				.getAttribute(&quot;USER_INFO&quot;);
<span class="nc" id="L181">		String status = &quot;error&quot;;</span>

<span class="nc" id="L183">		logger.debug(&quot;return Invetory of :&quot; + invId + &quot;With Brand :&quot; + brandsId</span>
				+ &quot; With Model :&quot; + modelId + &quot; for retailer :&quot; + retOrgId
				+ &quot;having sr no :&quot; + invSrNo);

<span class="nc" id="L187">		session.setAttribute(&quot;STATUS&quot;, status);</span>
<span class="nc" id="L188">		ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
<span class="nc bnc" id="L189" title="All 4 branches missed.">		if (invSrNo != null &amp;&amp; retOrgId != 0) {</span>
<span class="nc" id="L190">			status = helper.agtNonConsInvReturnSave(retOrgId, invSrNo,</span>
					userInfoBean.getUserOrgId(), modelId, userInfoBean
							.getUserType(), userInfoBean.getUserId());
		} else {
<span class="nc" id="L194">			System.out.println(&quot;&gt;&gt;&gt;&gt;&quot; + retInvDet + &quot;***&quot; + retOrgId);</span>
		}
<span class="nc" id="L196">		System.out.println(&quot;status&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot; + status);</span>
<span class="nc" id="L197">		session.setAttribute(&quot;STATUS&quot;, status);</span>
<span class="nc" id="L198">		return SUCCESS;</span>
	}

	public String agtReassignInvRet() throws LMSException {

		try {
<span class="nc" id="L204">			session = request.getSession();</span>
<span class="nc" id="L205">			UserInfoBean userInfoBean = (UserInfoBean) session</span>
					.getAttribute(&quot;USER_INFO&quot;);
<span class="nc" id="L207">			String status = &quot;error&quot;;</span>
<span class="nc" id="L208">			logger.debug(&quot;Assign Invetory of :&quot; + invId + &quot;With Brand :&quot;</span>
					+ brandsId + &quot; With Model :&quot; + modelId + &quot; for retailer :&quot;
					+ retOrgId + &quot;having sr no :&quot; + invSrNo);
<span class="nc bnc" id="L211" title="All 4 branches missed.">			if (retOrgId != 0 &amp;&amp; invSrNo != null) {</span>
<span class="nc" id="L212">				ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
<span class="nc" id="L213">				status = helper.reassignNonsRetSave(retOrgId, invSrNo,</span>
						userInfoBean.getUserOrgId(), modelId, userInfoBean
								.getUserType(), userInfoBean.getUserId());
			}
<span class="nc" id="L217">			session.setAttribute(&quot;STATUS&quot;, status);</span>
<span class="nc" id="L218">		} catch (LMSException e) {</span>
<span class="nc" id="L219">			fetchAgtInv();</span>
<span class="nc" id="L220">			addActionError(e.getErrorMessage());</span>
<span class="nc" id="L221">			logger.error(&quot;LMS Excetion &quot;, e);</span>
<span class="nc" id="L222">			session.setAttribute(&quot;STATUS&quot;, getText(&quot;label.error&quot;));</span>
<span class="nc" id="L223">			return INPUT;</span>
<span class="nc" id="L224">		} catch (Exception e) {</span>
<span class="nc" id="L225">			logger.error(&quot;Excetion &quot;, e);</span>
<span class="nc" id="L226">			session.setAttribute(&quot;STATUS&quot;, getText(&quot;label.error&quot;));</span>
<span class="nc" id="L227">			return INPUT;</span>
<span class="nc" id="L228">		}</span>

<span class="nc" id="L230">		return SUCCESS;</span>
	}

	public String consInvUpload() throws LMSException {

<span class="nc" id="L235">		session = request.getSession();</span>
<span class="nc" id="L236">		UserInfoBean userInfo = (UserInfoBean) session</span>
				.getAttribute(&quot;USER_INFO&quot;);
<span class="nc" id="L238">		ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
<span class="nc" id="L239">		String UploadList = helper.consInvUpload(invId, modelId, quantity,</span>
				userInfo.getUserId(), userInfo.getUserOrgId(), userInfo
						.getUserType());

<span class="nc" id="L243">		session.setAttribute(&quot;INV_NAME_LIST&quot;, UploadList);</span>

<span class="nc" id="L245">		return SUCCESS;</span>
	}

	public String consNonConsAsignInvSave() throws LMSException {

<span class="nc" id="L250">		System.out.println(&quot;ownerType = &quot; + ownerType + &quot;, agtOrgId = &quot;</span>
				+ agtOrgId + &quot;, retOrgId = &quot; + retOrgId + &quot;\n nonConsInvId = &quot;
				+ nonConsInvId + &quot;, nonConsModelId = &quot; + nonConsModelId
				+ &quot;, nonConsBrandId = &quot; + nonConsBrandId + &quot;\n consInvId = &quot;
				+ consInvId + &quot;, consModelId = &quot; + consModelId + &quot;, consQty = &quot;
				+ consQty + &quot;, sno = &quot; + serNo);

<span class="nc bnc" id="L257" title="All 38 branches missed.">		if (nonConsInvId != null &amp;&amp; nonConsInvId.length &gt; 0</span>
				&amp;&amp; ownerType != null &amp;&amp; nonConsModelId != null
				&amp;&amp; nonConsInvId.length &gt; 0
				&amp;&amp; nonConsInvId.length == nonConsInvId.length
				&amp;&amp; nonConsBrandId != null &amp;&amp; nonConsBrandId.length &gt; 0
				&amp;&amp; nonConsInvId.length == nonConsBrandId.length
				&amp;&amp; consInvId != null &amp;&amp; consInvId.length &gt; 0
				&amp;&amp; consModelId != null &amp;&amp; consModelId.length &gt; 0
				&amp;&amp; consInvId.length == consModelId.length &amp;&amp; serNo != null
				&amp;&amp; serNo.length &gt; 0 &amp;&amp; nonConsInvId.length == serNo.length
				&amp;&amp; (agtOrgId &gt; 0 || retOrgId &gt; 0)) {

<span class="nc" id="L269">			session = request.getSession();</span>
<span class="nc" id="L270">			UserInfoBean userInfo = (UserInfoBean) session</span>
					.getAttribute(&quot;USER_INFO&quot;);
<span class="nc" id="L272">			ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
<span class="nc" id="L273">			int DNID = helper.assignConsNNonConsInv(userInfo.getUserOrgId(),</span>
					userInfo.getUserId(), ownerType, agtOrgId, retOrgId,
					nonConsInvId, nonConsModelId, nonConsBrandId, serNo,
					consInvId, consModelId, consQty, userInfo.getUserType());
<span class="nc" id="L277">			session.setAttribute(&quot;DEL_NOTE_ID&quot;, DNID);</span>
			// session.setAttribute(&quot;INV_WISE_DET_LIST&quot;, invDetList);

<span class="nc" id="L280">			return SUCCESS;</span>
		} else {
<span class="nc" id="L282">			addActionError(getText(&quot;msg.entry.not.fill.proper&quot;));</span>
<span class="nc" id="L283">			return INPUT;</span>
		}
	}

	public String consNonConsReturnInvMenu() {

<span class="nc" id="L289">		return null;</span>
	}

	public String consNonConsReturnInvSave() throws LMSException {

<span class="nc" id="L294">		System.out.println(&quot;ownerType = &quot; + ownerType + &quot;, agtOrgId = &quot;</span>
				+ agtOrgId + &quot;, retOrgId = &quot; + retOrgId + &quot;\n nonConsInvId = &quot;
				+ nonConsInvId + &quot;, nonConsModelId = &quot; + nonConsModelId
				+ &quot;, nonConsBrandId = &quot; + nonConsBrandId + &quot;\n consInvId = &quot;
				+ consInvId + &quot;, consModelId = &quot; + consModelId + &quot;, consQty = &quot;
				+ consQty + &quot;, sno = &quot; + serNo);

<span class="nc bnc" id="L301" title="All 38 branches missed.">		if (nonConsInvId != null &amp;&amp; nonConsInvId.length &gt; 0</span>
				&amp;&amp; ownerType != null &amp;&amp; nonConsModelId != null
				&amp;&amp; nonConsInvId.length &gt; 0
				&amp;&amp; nonConsInvId.length == nonConsInvId.length
				&amp;&amp; nonConsBrandId != null &amp;&amp; nonConsBrandId.length &gt; 0
				&amp;&amp; nonConsInvId.length == nonConsBrandId.length
				&amp;&amp; consInvId != null &amp;&amp; consInvId.length &gt; 0
				&amp;&amp; consModelId != null &amp;&amp; consModelId.length &gt; 0
				&amp;&amp; consInvId.length == consModelId.length &amp;&amp; serNo != null
				&amp;&amp; serNo.length &gt; 0 &amp;&amp; nonConsInvId.length == serNo.length
				&amp;&amp; (agtOrgId &gt; 0 || retOrgId &gt; 0)) {

<span class="nc" id="L313">			session = request.getSession();</span>
<span class="nc" id="L314">			UserInfoBean userInfo = (UserInfoBean) session</span>
					.getAttribute(&quot;USER_INFO&quot;);

<span class="nc" id="L317">			ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
<span class="nc" id="L318">			logger.debug(ownerType + &quot; -----&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot; + userInfo.getUserType());</span>
<span class="nc" id="L319">			int DNID = helper.returnConsNNonConsInv(userInfo.getUserOrgId(),</span>
					userInfo.getUserId(), ownerType, agtOrgId, retOrgId,
					nonConsInvId, nonConsModelId, nonConsBrandId, serNo,
					consInvId, consModelId, consQty, userInfo.getUserType());
<span class="nc" id="L323">			session.setAttribute(&quot;DEL_NOTE_ID&quot;, DNID);</span>
			// session.setAttribute(&quot;INV_WISE_DET_LIST&quot;, invDetList);

<span class="nc" id="L326">			return SUCCESS;</span>
		} else {
<span class="nc" id="L328">			addActionError(getText(&quot;msg.entry.not.fill.proper&quot;));</span>
<span class="nc" id="L329">			return INPUT;</span>
		}
	}

	public String consNonConsSearchInvDetail() throws LMSException {
<span class="nc" id="L334">		System.out.println(&quot;inside consNonConsSearchInvDetail&quot;);</span>
<span class="nc" id="L335">		session = request.getSession();</span>
<span class="nc" id="L336">		List&lt;ConsNNonConsBean&gt; invDetList = null;</span>

<span class="nc" id="L338">		ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
<span class="nc" id="L339">		invDetList = helper.fetchInvntoryWiseDetail(ownerId, invType, invId,</span>
				brandId, modelId);
<span class="nc" id="L341">		session.setAttribute(&quot;INV_WISE_DET_LIST&quot;, invDetList);</span>
<span class="nc bnc" id="L342" title="All 2 branches missed.">		if (&quot;NON_CONS&quot;.equalsIgnoreCase(invType.trim())) {</span>
<span class="nc" id="L343">			return &quot;noncons&quot;;</span>
		} else {
<span class="nc" id="L345">			return &quot;cons&quot;;</span>
		}
	}

	public String consNonConsSearchTerminalInvMenu() throws LMSException {
<span class="nc" id="L350">		session = request.getSession();</span>

<span class="nc" id="L352">		Map&lt;String, TreeMap&lt;String, String&gt;&gt; agentCountMap = new LinkedHashMap&lt;String, TreeMap&lt;String, String&gt;&gt;();</span>
<span class="nc" id="L353">		ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
		// invDetList = helper.fetchTerminalInvntoryCount();
<span class="nc" id="L355">		agentCountMap = helper.fetchTerminalInvntoryCount();</span>
		// List&lt;String&gt; modDetList=null;
<span class="nc" id="L357">		TreeMap&lt;String, String&gt; modDetMap = helper.fetchModelInvntory();</span>
		// modDetList=helper.fetchModelInvntory();

<span class="nc" id="L360">		session.setAttribute(&quot;INV_DET_MAP&quot;, agentCountMap);</span>
<span class="nc" id="L361">		session.setAttribute(&quot;MODEL_NAME_MAP&quot;, modDetMap);</span>

<span class="nc" id="L363">		return SUCCESS;</span>
	}

	public String consNonConsSearchAgentTerminal() throws LMSException {
<span class="nc" id="L367">		session = request.getSession();</span>

<span class="nc" id="L369">		Map&lt;String, TreeMap&lt;String, String&gt;&gt; retailerCountMap = new LinkedHashMap&lt;String, TreeMap&lt;String, String&gt;&gt;();</span>
<span class="nc" id="L370">		ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
		// invDetList = helper.fetchTerminalInvntoryCount();
<span class="nc" id="L372">		retailerCountMap = helper.fetchTerminalRetailerInvntoryCount(orgId);</span>

<span class="nc" id="L374">		TreeMap&lt;String, String&gt; modDetMap = helper.fetchModelInvntory();</span>

<span class="nc" id="L376">		session.setAttribute(&quot;INV_DET_MAP&quot;, retailerCountMap);</span>
<span class="nc" id="L377">		session.setAttribute(&quot;MODEL_NAME_MAP&quot;, modDetMap);</span>

<span class="nc" id="L379">		return SUCCESS;</span>
	}

	public String consNonConsSearchModelSerial() throws LMSException {
<span class="nc" id="L383">		session = request.getSession();</span>

<span class="nc" id="L385">		Map&lt;String, String&gt; agentModelSerialMap = new LinkedHashMap&lt;String, String&gt;();</span>
<span class="nc" id="L386">		ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>

<span class="nc" id="L388">		agentModelSerialMap = helper.fetchAgentModuleSerial(modelId, orgId);</span>

<span class="nc" id="L390">		session.setAttribute(&quot;AGT_MODEL_SERIAL_MAP&quot;, agentModelSerialMap);</span>

<span class="nc" id="L392">		return SUCCESS;</span>
	}

	public String consNonConsSearchInvDetailAtAgent() throws LMSException {
<span class="nc" id="L396">		System.out.println(&quot;inside consNonConsSearchInvDetail&quot;);</span>
<span class="nc" id="L397">		session = request.getSession();</span>
<span class="nc" id="L398">		List&lt;ConsNNonConsBean&gt; invDetList = null;</span>

<span class="nc" id="L400">		ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
<span class="nc" id="L401">		invDetList = helper.fetchInvntoryWiseDetail(ownerId, invType, invId,</span>
				brandId, modelId);
<span class="nc" id="L403">		session.setAttribute(&quot;INV_WISE_DET_LIST&quot;, invDetList);</span>
<span class="nc bnc" id="L404" title="All 2 branches missed.">		if (&quot;NON_CONS&quot;.equalsIgnoreCase(invType.trim())) {</span>
<span class="nc" id="L405">			return &quot;noncons&quot;;</span>
		} else {
<span class="nc" id="L407">			return &quot;cons&quot;;</span>
		}
	}

	public String consNonConsSearchInvMenu() throws LMSException {

<span class="nc" id="L413">		session = request.getSession();</span>

<span class="nc" id="L415">		ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
<span class="nc" id="L416">		Map&lt;String, HashMap&lt;String, String&gt;&gt; map = helper.fetchAgentNRetList();</span>

<span class="nc" id="L418">		session.setAttribute(&quot;INV_NAME_LIST&quot;, map.get(&quot;nonConsInvMap&quot;));</span>
<span class="nc" id="L419">		session.setAttribute(&quot;CONS_INV_NAME_LIST&quot;, map.get(&quot;consInvMap&quot;));</span>
<span class="nc" id="L420">		session.setAttribute(&quot;BRAND_NAME_LIST&quot;, map.get(&quot;brandMap&quot;));</span>
		// session.setAttribute(&quot;AGENT_ORG_MAP&quot;, map.get(&quot;agentMap&quot;));
		// session.setAttribute(&quot;RET_ORG_MAP&quot;, map.get(&quot;retMap&quot;));
<span class="nc" id="L423">		session.setAttribute(&quot;MODEL_SPEC_LIST&quot;, map.get(&quot;invSpecMap&quot;));</span>
<span class="nc" id="L424">		session.setAttribute(&quot;MODEL_NAME_LIST&quot;, map.get(&quot;modelMap&quot;));</span>

<span class="nc" id="L426">		return SUCCESS;</span>
	}

	public String consNonConsSearchInvMenuAtAgent() throws LMSException {

<span class="nc" id="L431">		session = request.getSession();</span>
<span class="nc" id="L432">		UserInfoBean userBean = (UserInfoBean) session</span>
				.getAttribute(&quot;USER_INFO&quot;);
<span class="nc" id="L434">		ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
<span class="nc" id="L435">		Map&lt;String, Map&lt;String, String&gt;&gt; map = helper</span>
				.fetchAgentNRetListAtAgent(userBean);

<span class="nc" id="L438">		session.setAttribute(&quot;INV_NAME_LIST&quot;, map.get(&quot;nonConsInvMap&quot;));</span>
<span class="nc" id="L439">		session.setAttribute(&quot;CONS_INV_NAME_LIST&quot;, map.get(&quot;consInvMap&quot;));</span>
<span class="nc" id="L440">		session.setAttribute(&quot;BRAND_NAME_LIST&quot;, map.get(&quot;brandMap&quot;));</span>
		// session.setAttribute(&quot;RET_ORG_MAP&quot;, map.get(&quot;retMap&quot;));
<span class="nc" id="L442">		session.setAttribute(&quot;MODEL_SPEC_LIST&quot;, map.get(&quot;invSpecMap&quot;));</span>
<span class="nc" id="L443">		session.setAttribute(&quot;MODEL_NAME_LIST&quot;, map.get(&quot;modelMap&quot;));</span>

<span class="nc" id="L445">		return SUCCESS;</span>
	}

	public String consNonConsSearchInvMenuForAgt() throws LMSException {
		/*
		 * session = request.getSession(); UserInfoBean userInfoBean =
		 * (UserInfoBean) session .getAttribute(&quot;USER_INFO&quot;);
		 * ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();
		 * Map&lt;String, String&gt; map = helper.fetchRetList(userInfoBean
		 * .getUserOrgId()); session.setAttribute(&quot;RET_ORG_MAP&quot;, map);
		 */

<span class="nc" id="L457">		session = request.getSession();</span>
<span class="nc" id="L458">		UserInfoBean userInfoBean = (UserInfoBean) session</span>
				.getAttribute(&quot;USER_INFO&quot;);
<span class="nc" id="L460">		ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
<span class="nc" id="L461">		String cntrlType = &quot;All&quot;;</span>
<span class="nc" id="L462">		Map&lt;String, Map&lt;String, String&gt;&gt; invDetailsMap = helper</span>
				.fetchConsInvNModelSpecDetail(&quot;NON_CONS&quot;, cntrlType);

<span class="nc" id="L465">		setModelMap(invDetailsMap.get(&quot;modelMap&quot;));</span>
<span class="nc" id="L466">		setBrandMap(invDetailsMap.get(&quot;brandMap&quot;));</span>
<span class="nc" id="L467">		setInvMap(invDetailsMap.get(&quot;invMap&quot;));</span>
		// setBindingLengthMap(invDetailsMap.get(&quot;modelMapBindingLength&quot;));

		/*
		 * Map&lt;String, String&gt; map = helper.fetchRetListForAsnInv(userInfoBean
		 * .getUserOrgId());
		 */
<span class="nc" id="L474">		CommonFunctionsHelper comFunHelper = new CommonFunctionsHelper();</span>
<span class="nc" id="L475">		ArrayList&lt;String&gt; termIdList = null;</span>
<span class="nc" id="L476">		termIdList = comFunHelper.fetchTerminalIds(userInfoBean.getUserOrgId());</span>

		// session.setAttribute(&quot;RET_ORG_MAP&quot;, map);
<span class="nc" id="L479">		session.setAttribute(&quot;TEMINAL_LIST&quot;, termIdList);</span>
<span class="nc" id="L480">		return SUCCESS;</span>
	}

	public String consNonConsSearchInvNav() {
<span class="nc" id="L484">		int endValue = 0;</span>
<span class="nc" id="L485">		int startValue = 0;</span>
<span class="nc" id="L486">		HttpSession session = request.getSession();</span>
<span class="nc" id="L487">		List ajaxList = (List) session.getAttribute(&quot;INV_DET_LIST&quot;);</span>
<span class="nc" id="L488">		List ajaxSearchList = new ArrayList();</span>

<span class="nc bnc" id="L490" title="All 2 branches missed.">		if (ajaxList != null) {</span>
<span class="nc bnc" id="L491" title="All 2 branches missed.">			if (getEnd() != null) {</span>
<span class="nc" id="L492">				end = getEnd();</span>
			} else {
<span class="nc" id="L494">				end = &quot;first&quot;;</span>
			}
<span class="nc" id="L496">			startValue = (Integer) session</span>
					.getAttribute(&quot;startValueOrderSearch&quot;);
<span class="nc bnc" id="L498" title="All 2 branches missed.">			if (end.equals(&quot;first&quot;)) {</span>
<span class="nc" id="L499">				startValue = 0;</span>
<span class="nc" id="L500">				endValue = startValue + 10;</span>
<span class="nc bnc" id="L501" title="All 2 branches missed.">				if (endValue &gt; ajaxList.size()) {</span>
<span class="nc" id="L502">					endValue = ajaxList.size();</span>
				}
<span class="nc bnc" id="L504" title="All 2 branches missed.">			} else if (end.equals(&quot;Previous&quot;)) {</span>
<span class="nc" id="L505">				startValue = startValue - 10;</span>
<span class="nc bnc" id="L506" title="All 2 branches missed.">				if (startValue &lt; 10) {</span>
<span class="nc" id="L507">					startValue = 0;</span>
				}
<span class="nc" id="L509">				endValue = startValue + 10;</span>
<span class="nc bnc" id="L510" title="All 2 branches missed.">				if (endValue &gt; ajaxList.size()) {</span>
<span class="nc" id="L511">					endValue = ajaxList.size();</span>
				}
<span class="nc bnc" id="L513" title="All 2 branches missed.">			} else if (end.equals(&quot;Next&quot;)) {</span>
<span class="nc" id="L514">				startValue = startValue + 10;</span>
<span class="nc" id="L515">				endValue = startValue + 10;</span>
<span class="nc bnc" id="L516" title="All 2 branches missed.">				if (endValue &gt; ajaxList.size()) {</span>
<span class="nc" id="L517">					endValue = ajaxList.size();</span>
				}
<span class="nc bnc" id="L519" title="All 2 branches missed.">				if (startValue &gt; ajaxList.size()) {</span>
<span class="nc" id="L520">					startValue = ajaxList.size() - ajaxList.size() % 10;</span>
				}
<span class="nc bnc" id="L522" title="All 2 branches missed.">			} else if (end.equals(&quot;last&quot;)) {</span>
<span class="nc" id="L523">				endValue = ajaxList.size();</span>
<span class="nc" id="L524">				startValue = endValue - endValue % 10;</span>

			}
<span class="nc bnc" id="L527" title="All 2 branches missed.">			if (startValue == endValue) {</span>
<span class="nc" id="L528">				startValue = endValue - 10;</span>
			}

<span class="nc bnc" id="L531" title="All 2 branches missed.">			for (int i = startValue; i &lt; endValue; i++) {</span>
<span class="nc" id="L532">				ajaxSearchList.add(ajaxList.get(i));</span>
			}
<span class="nc" id="L534">			session.setAttribute(&quot;INV_DET_LIST_NAV&quot;, ajaxSearchList);</span>
<span class="nc" id="L535">			session.setAttribute(&quot;startValueOrderSearch&quot;, startValue);</span>
<span class="nc" id="L536">			setSearchResultsAvailable(&quot;Yes&quot;);</span>

		}

<span class="nc" id="L540">		return SUCCESS;</span>
	}

	public String consNonConsSearchInvNavAtAgent() {
<span class="nc" id="L544">		int endValue = 0;</span>
<span class="nc" id="L545">		int startValue = 0;</span>
<span class="nc" id="L546">		HttpSession session = request.getSession();</span>
<span class="nc" id="L547">		List ajaxList = (List) session.getAttribute(&quot;INV_DET_LIST&quot;);</span>
<span class="nc" id="L548">		List ajaxSearchList = new ArrayList();</span>

<span class="nc bnc" id="L550" title="All 2 branches missed.">		if (ajaxList != null) {</span>
<span class="nc bnc" id="L551" title="All 2 branches missed.">			if (getEnd() != null) {</span>
<span class="nc" id="L552">				end = getEnd();</span>
			} else {
<span class="nc" id="L554">				end = &quot;first&quot;;</span>
			}
<span class="nc" id="L556">			startValue = (Integer) session</span>
					.getAttribute(&quot;startValueOrderSearch&quot;);
<span class="nc bnc" id="L558" title="All 2 branches missed.">			if (end.equals(&quot;first&quot;)) {</span>
<span class="nc" id="L559">				startValue = 0;</span>
<span class="nc" id="L560">				endValue = startValue + 10;</span>
<span class="nc bnc" id="L561" title="All 2 branches missed.">				if (endValue &gt; ajaxList.size()) {</span>
<span class="nc" id="L562">					endValue = ajaxList.size();</span>
				}
<span class="nc bnc" id="L564" title="All 2 branches missed.">			} else if (end.equals(&quot;Previous&quot;)) {</span>
<span class="nc" id="L565">				startValue = startValue - 10;</span>
<span class="nc bnc" id="L566" title="All 2 branches missed.">				if (startValue &lt; 10) {</span>
<span class="nc" id="L567">					startValue = 0;</span>
				}
<span class="nc" id="L569">				endValue = startValue + 10;</span>
<span class="nc bnc" id="L570" title="All 2 branches missed.">				if (endValue &gt; ajaxList.size()) {</span>
<span class="nc" id="L571">					endValue = ajaxList.size();</span>
				}
<span class="nc bnc" id="L573" title="All 2 branches missed.">			} else if (end.equals(&quot;Next&quot;)) {</span>
<span class="nc" id="L574">				startValue = startValue + 10;</span>
<span class="nc" id="L575">				endValue = startValue + 10;</span>
<span class="nc bnc" id="L576" title="All 2 branches missed.">				if (endValue &gt; ajaxList.size()) {</span>
<span class="nc" id="L577">					endValue = ajaxList.size();</span>
				}
<span class="nc bnc" id="L579" title="All 2 branches missed.">				if (startValue &gt; ajaxList.size()) {</span>
<span class="nc" id="L580">					startValue = ajaxList.size() - ajaxList.size() % 10;</span>
				}
<span class="nc bnc" id="L582" title="All 2 branches missed.">			} else if (end.equals(&quot;last&quot;)) {</span>
<span class="nc" id="L583">				endValue = ajaxList.size();</span>
<span class="nc" id="L584">				startValue = endValue - endValue % 10;</span>

			}
<span class="nc bnc" id="L587" title="All 2 branches missed.">			if (startValue == endValue) {</span>
<span class="nc" id="L588">				startValue = endValue - 10;</span>
			}

<span class="nc bnc" id="L591" title="All 2 branches missed.">			for (int i = startValue; i &lt; endValue; i++) {</span>
<span class="nc" id="L592">				ajaxSearchList.add(ajaxList.get(i));</span>
			}
<span class="nc" id="L594">			session.setAttribute(&quot;INV_DET_LIST_NAV&quot;, ajaxSearchList);</span>
<span class="nc" id="L595">			session.setAttribute(&quot;startValueOrderSearch&quot;, startValue);</span>
<span class="nc" id="L596">			setSearchResultsAvailable(&quot;Yes&quot;);</span>

		}

<span class="nc" id="L600">		return SUCCESS;</span>
	}

	public String consNonConsSearchInvSearch() throws LMSException {
<span class="nc" id="L604">		session = request.getSession();</span>
<span class="nc" id="L605">		List&lt;ConsNNonConsBean&gt; invDetList = null;</span>

<span class="nc" id="L607">		ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
<span class="nc" id="L608">		invDetList = helper.fetchInvntoryCount(ownerType, agtOrgId, retOrgId,</span>
				invType, invId, brandId, modelId, sign, count);

<span class="nc" id="L611">		session.setAttribute(&quot;INV_DET_LIST&quot;, invDetList);</span>
<span class="nc bnc" id="L612" title="All 4 branches missed.">		if (invDetList != null &amp;&amp; invDetList.size() &gt; 0) {</span>
<span class="nc" id="L613">			session.setAttribute(&quot;INV_DET_LIST_NAV&quot;, invDetList);</span>
			// session attribute used for pagination.
<span class="nc" id="L615">			session.setAttribute(&quot;startValueOrderSearch&quot;, new Integer(0));</span>
<span class="nc" id="L616">			session.setAttribute(&quot;SearchResultsAvailable&quot;, &quot;Yes&quot;);</span>
<span class="nc" id="L617">			consNonConsSearchInvNav();</span>
		} else {
			// / session attribute used for pagination.
<span class="nc" id="L620">			session.setAttribute(&quot;SearchResultsAvailable&quot;, &quot;No&quot;);</span>
<span class="nc" id="L621">			session.setAttribute(&quot;INV_DET_LIST_NAV&quot;,</span>
					new ArrayList&lt;ConsNNonConsBean&gt;());
		}
<span class="nc" id="L624">		return SUCCESS;</span>
	}

	public String consNonConsSearchInvSearchAtAgent() throws LMSException {
<span class="nc" id="L628">		session = request.getSession();</span>
<span class="nc" id="L629">		List&lt;ConsNNonConsBean&gt; invDetList = null;</span>

<span class="nc" id="L631">		UserInfoBean userBean = (UserInfoBean) session</span>
				.getAttribute(&quot;USER_INFO&quot;);

<span class="nc" id="L634">		ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
<span class="nc" id="L635">		invDetList = helper.fetchInvntoryCountAtAgent(ownerType, userBean</span>
				.getUserOrgId(), retOrgId, invType, invId, brandId, modelId,
				sign, count);

<span class="nc" id="L639">		session.setAttribute(&quot;INV_DET_LIST&quot;, invDetList);</span>
<span class="nc bnc" id="L640" title="All 4 branches missed.">		if (invDetList != null &amp;&amp; invDetList.size() &gt; 0) {</span>
<span class="nc" id="L641">			session.setAttribute(&quot;INV_DET_LIST_NAV&quot;, invDetList);</span>
			// session attribute used for pagination.
<span class="nc" id="L643">			session.setAttribute(&quot;startValueOrderSearch&quot;, new Integer(0));</span>
<span class="nc" id="L644">			session.setAttribute(&quot;SearchResultsAvailable&quot;, &quot;Yes&quot;);</span>
<span class="nc" id="L645">			consNonConsSearchInvNav();</span>
		} else {
			// / session attribute used for pagination.
<span class="nc" id="L648">			session.setAttribute(&quot;SearchResultsAvailable&quot;, &quot;No&quot;);</span>
<span class="nc" id="L649">			session.setAttribute(&quot;INV_DET_LIST_NAV&quot;,</span>
					new ArrayList&lt;ConsNNonConsBean&gt;());
		}
<span class="nc" id="L652">		return SUCCESS;</span>
	}

	public String execute() throws LMSException {
<span class="nc" id="L656">		session = request.getSession();</span>
<span class="nc" id="L657">		ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
<span class="nc" id="L658">		Map&lt;String, HashMap&lt;String, String&gt;&gt; invDetailsMap = helper</span>
				.fetchInvDetails();

<span class="nc" id="L661">		Map&lt;String, String&gt; nonConsInvMap = invDetailsMap.get(&quot;nonConsInvMap&quot;);</span>
<span class="nc" id="L662">		Map&lt;String, String&gt; consInvMap = invDetailsMap.get(&quot;consInvMap&quot;);</span>
<span class="nc" id="L663">		Map&lt;String, String&gt; brandNameMap = invDetailsMap.get(&quot;brandMap&quot;);</span>

<span class="nc" id="L665">		session.setAttribute(&quot;INV_NAME_LIST&quot;, nonConsInvMap);</span>
<span class="nc" id="L666">		session.setAttribute(&quot;CONS_INV_NAME_LIST&quot;, consInvMap);</span>
<span class="nc" id="L667">		session.setAttribute(&quot;BRAND_NAME_LIST&quot;, brandNameMap);</span>

<span class="nc" id="L669">		return SUCCESS;</span>
	}

	public String fetchAgtInv() throws LMSException {
<span class="nc" id="L673">		session = request.getSession();</span>
<span class="nc" id="L674">		UserInfoBean userInfoBean = (UserInfoBean) session</span>
				.getAttribute(&quot;USER_INFO&quot;);
<span class="nc" id="L676">		ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
<span class="nc" id="L677">		String cntrlType = &quot;All&quot;;</span>
<span class="nc" id="L678">		Map&lt;String, Map&lt;String, String&gt;&gt; invDetailsMap = helper</span>
				.fetchConsInvNModelSpecDetail(&quot;NON_CONS&quot;, cntrlType);

<span class="nc" id="L681">		setModelMap(invDetailsMap.get(&quot;modelMap&quot;));</span>
<span class="nc" id="L682">		setBrandMap(invDetailsMap.get(&quot;brandMap&quot;));</span>
<span class="nc" id="L683">		setInvMap(invDetailsMap.get(&quot;invMap&quot;));</span>
<span class="nc" id="L684">		setBindingLengthMap(invDetailsMap.get(&quot;modelMapBindingLength&quot;));</span>

		/*
		 * Map&lt;String, String&gt; map = helper.fetchRetListForAsnInv(userInfoBean
		 * .getUserOrgId());
		 */
<span class="nc" id="L690">		CommonFunctionsHelper comFunHelper = new CommonFunctionsHelper();</span>
<span class="nc" id="L691">		ArrayList&lt;String&gt; termIdList = null;</span>
<span class="nc" id="L692">		termIdList = comFunHelper.fetchTerminalIds(userInfoBean.getUserOrgId());</span>

		// session.setAttribute(&quot;RET_ORG_MAP&quot;, map);
<span class="nc" id="L695">		session.setAttribute(&quot;TEMINAL_LIST&quot;, termIdList);</span>

<span class="nc" id="L697">		return SUCCESS;</span>
	}

	public void fetchRetList() {
<span class="nc" id="L701">		session = request.getSession();</span>
<span class="nc" id="L702">		UserInfoBean userInfoBean = (UserInfoBean) session</span>
				.getAttribute(&quot;USER_INFO&quot;);
<span class="nc" id="L704">		ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
		try {
<span class="nc" id="L706">			PrintWriter out = response.getWriter();</span>

<span class="nc" id="L708">			String retList = helper.fetchRetailerForReassignInv(userInfoBean</span>
					.getUserOrgId());
<span class="nc" id="L710">			out.print(retList);</span>

<span class="nc" id="L712">		} catch (Exception e) {</span>

<span class="nc" id="L714">			e.printStackTrace();</span>

<span class="nc" id="L716">		}</span>

<span class="nc" id="L718">	}</span>

	public String fetchConsInvNModelSpecDetail() throws LMSException {

<span class="nc" id="L722">		session = request.getSession();</span>
<span class="nc" id="L723">		ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
<span class="nc" id="L724">		UserInfoBean userInfoBean = (UserInfoBean) session</span>
				.getAttribute(&quot;USER_INFO&quot;);
<span class="nc bnc" id="L726" title="All 2 branches missed.">		String cntrlType = userInfoBean.getUserType().equalsIgnoreCase(&quot;ADMIN&quot;) ? &quot;N&quot;</span>
				: &quot;Y&quot;;
<span class="nc" id="L728">		Map&lt;String, Map&lt;String, String&gt;&gt; invDetailsMap = helper</span>
				.fetchConsInvNModelSpecDetail(&quot;CONS&quot;, cntrlType);

<span class="nc" id="L731">		Map&lt;String, String&gt; invSpecMap = invDetailsMap.get(&quot;invSpecMap&quot;);</span>
<span class="nc" id="L732">		Map&lt;String, String&gt; invMap = invDetailsMap.get(&quot;invMap&quot;);</span>

<span class="nc" id="L734">		session.setAttribute(&quot;CONS_INV_SPEC_NAME_LIST&quot;, invSpecMap);</span>
<span class="nc" id="L735">		session.setAttribute(&quot;CONS_INV_NAME_LIST&quot;, invMap);</span>

<span class="nc" id="L737">		return SUCCESS;</span>
	}

	public Map&lt;String, String&gt; getBrandMap() {
<span class="nc" id="L741">		return brandMap;</span>
	}

	public void setBrandMap(Map&lt;String, String&gt; brandMap) {
<span class="nc" id="L745">		this.brandMap = brandMap;</span>
<span class="nc" id="L746">	}</span>

	public Map&lt;String, String&gt; getModelMap() {
<span class="nc" id="L749">		return modelMap;</span>
	}

	public void setModelMap(Map&lt;String, String&gt; modelMap) {
<span class="nc" id="L753">		this.modelMap = modelMap;</span>
<span class="nc" id="L754">	}</span>

	public Map&lt;String, String&gt; getInvMap() {
<span class="nc" id="L757">		return invMap;</span>
	}

	public void setInvMap(Map&lt;String, String&gt; invMap) {
<span class="nc" id="L761">		this.invMap = invMap;</span>
<span class="nc" id="L762">	}</span>

	public Map&lt;String, String&gt; getBindingLengthMap() {
<span class="nc" id="L765">		return bindingLengthMap;</span>
	}

	public void setBindingLengthMap(Map&lt;String, String&gt; bindingLengthMap) {
<span class="nc" id="L769">		this.bindingLengthMap = bindingLengthMap;</span>
<span class="nc" id="L770">	}</span>

	public String getBind_len() {
<span class="nc" id="L773">		return bind_len;</span>
	}

	public void setBind_len(String bindLen) {
<span class="nc" id="L777">		bind_len = bindLen;</span>
<span class="nc" id="L778">	}</span>

	public String fetchNonConsInvNModelSpecDetail() throws LMSException {
<span class="nc" id="L781">		session = request.getSession();</span>
<span class="nc" id="L782">		ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
<span class="nc" id="L783">		UserInfoBean userInfoBean = (UserInfoBean) session</span>
				.getAttribute(&quot;USER_INFO&quot;);
<span class="nc bnc" id="L785" title="All 2 branches missed.">		String cntrlType = userInfoBean.getUserType().equalsIgnoreCase(&quot;ADMIN&quot;) ? &quot;N&quot;</span>
				: &quot;Y&quot;;
<span class="nc" id="L787">		Map&lt;String, Map&lt;String, String&gt;&gt; invDetailsMap = helper</span>
				.fetchConsInvNModelSpecDetail(&quot;NON_CONS&quot;, cntrlType);

		/*
		 * Map&lt;String, String&gt; brandMap = null; Map&lt;String, String&gt; modelMap =
		 * null; Map&lt;String, String&gt; invMap = null; Map&lt;String, String&gt;
		 * bindingLengthMap = null;
		 */

		/*
		 * if(userInfoBean.getUserType().equalsIgnoreCase(&quot;ADMIN&quot;)){
		 * 
		 * 
		 * }else{
		 * 
		 * brandMap = invDetailsMap.get(&quot;brandMap&quot;); modelMap =
		 * invDetailsMap.get(&quot;modelMap&quot;); invMap = invDetailsMap.get(&quot;invMap&quot;);
		 * invMap.remove(&quot;1&quot;);// remove terminal Inventory bindingLengthMap =
		 * invDetailsMap.get(&quot;modelMapBindingLength&quot;); }
		 */

<span class="nc" id="L808">		setModelMap(invDetailsMap.get(&quot;modelMap&quot;));</span>
<span class="nc" id="L809">		setBrandMap(invDetailsMap.get(&quot;brandMap&quot;));</span>
<span class="nc" id="L810">		setInvMap(invDetailsMap.get(&quot;invMap&quot;));</span>
<span class="nc" id="L811">		setBindingLengthMap(invDetailsMap.get(&quot;modelMapBindingLength&quot;));</span>
<span class="nc" id="L812">		setInvCodeMap(invDetailsMap.get(&quot;invCodeMap&quot;));</span>
		/*
		 * session.setAttribute(&quot;MODEL_NAME_LIST&quot;, modelMap);
		 * session.setAttribute(&quot;BRAND_NAME_LIST&quot;, brandMap);
		 * session.setAttribute(&quot;INV_NAME_LIST&quot;, invMap);
		 * session.setAttribute(&quot;MODEL_NAME_LIST_BINDING&quot;, bindingLengthMap);
		 */

<span class="nc" id="L820">		return SUCCESS;</span>
	}

	public String fetchNonConsInvNModelSpecDetailForTrack() throws LMSException {

<span class="nc" id="L825">		ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
<span class="nc" id="L826">		String cntrlType = &quot;All&quot;; // get All Inventory where user cntrl or not</span>
<span class="nc" id="L827">		Map&lt;String, Map&lt;String, String&gt;&gt; invDetailsMap = helper</span>
				.fetchConsInvNModelSpecDetail(&quot;NON_CONS&quot;, cntrlType);

<span class="nc" id="L830">		brandMap = invDetailsMap.get(&quot;brandMap&quot;);</span>
<span class="nc" id="L831">		modelMap = invDetailsMap.get(&quot;modelMap&quot;);</span>
<span class="nc" id="L832">		invMap = invDetailsMap.get(&quot;invMap&quot;);</span>
<span class="nc" id="L833">		bindingLengthMap = invDetailsMap.get(&quot;modelMapBindingLength&quot;);</span>

<span class="nc" id="L835">		setModelMap(modelMap);</span>
<span class="nc" id="L836">		setBrandMap(brandMap);</span>
<span class="nc" id="L837">		setInvMap(invMap);</span>
<span class="nc" id="L838">		setBindingLengthMap(bindingLengthMap);</span>

<span class="nc" id="L840">		return SUCCESS;</span>
	}

	public String getAddType() {
<span class="nc" id="L844">		return addType;</span>
	}

	public int getAgtOrgId() {
<span class="nc" id="L848">		return agtOrgId;</span>
	}

	public int getBrandId() {
<span class="nc" id="L852">		return brandId;</span>
	}

	public String[] getBrandIdForModel() {
<span class="nc" id="L856">		return brandIdForModel;</span>
	}

	public String getBrandsId() {
<span class="nc" id="L860">		return brandsId;</span>
	}

	public String getConsAddType() {
<span class="nc" id="L864">		return consAddType;</span>
	}

	public int[] getConsInvId() {
<span class="nc" id="L868">		return consInvId;</span>
	}

	public int[] getConsModelId() {
<span class="nc" id="L872">		return consModelId;</span>
	}

	public int[] getConsQty() {
<span class="nc" id="L876">		return consQty;</span>
	}

	public double getCost() {
<span class="nc" id="L880">		return cost;</span>
	}

	public double[] getCostPerUnit() {
<span class="nc" id="L884">		return costPerUnit;</span>
	}

	public Integer getCount() {
<span class="nc" id="L888">		return count;</span>
	}

	public String getEnd() {
<span class="nc" id="L892">		return end;</span>
	}

	public void getInvForRet() throws LMSException {
<span class="nc" id="L896">		session = request.getSession();</span>
<span class="nc" id="L897">		UserInfoBean userInfoBean = (UserInfoBean) session</span>
				.getAttribute(&quot;USER_INFO&quot;);
		PrintWriter out;
		try {
<span class="nc" id="L901">			out = response.getWriter();</span>

<span class="nc" id="L903">			ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
<span class="nc" id="L904">			String invList = helper.invListForRet(retOrgId);</span>
			/*
			 * String html =
			 * &quot; &lt;select class=\&quot;option\&quot; name=\&quot;retInvDet\&quot; id ='retInvDet'&gt;&lt;option value=-1&gt;--PleaseSelect--&lt;/option&gt;&quot;
			 * ; for (String name : invList) { html +=
			 * &quot;&lt;option class=\&quot;option\&quot; value=\&quot;&quot; + name + &quot;\&quot;&gt;&quot; + name +
			 * &quot;&lt;/option&gt;&quot;; } html += &quot;&lt;/select&gt;&quot;;
			 */
<span class="nc" id="L912">			response.setContentType(&quot;text/html&quot;);</span>
<span class="nc" id="L913">			out.print(invList);</span>
<span class="nc" id="L914">		} catch (IOException e) {</span>
			// TODO Auto-generated catch block
<span class="nc" id="L916">			e.printStackTrace();</span>
<span class="nc" id="L917">		}</span>
<span class="nc" id="L918">	}</span>

	public int getInvId() {
<span class="nc" id="L921">		return invId;</span>
	}

	public int[] getInvIdForBrand() {
<span class="nc" id="L925">		return invIdForBrand;</span>
	}

	public int[] getInvIdForModel() {
<span class="nc" id="L929">		return invIdForModel;</span>
	}

	public int[] getInvIdForModSpec() {
<span class="nc" id="L933">		return invIdForModSpec;</span>
	}

	public String[] getInvImg() {
<span class="nc" id="L937">		return invImg;</span>
	}

	public int[] getInvNameForBrand() {
<span class="nc" id="L941">		return invIdForBrand;</span>
	}

	public String getInvType() {
<span class="nc" id="L945">		return invType;</span>
	}

	public String getIsNew() {
<span class="nc" id="L949">		return isNew;</span>
	}

	public String getModelId() {
<span class="nc" id="L953">		return modelId;</span>
	}

	public String[] getNewBrandDesc() {
<span class="nc" id="L957">		return newBrandDesc;</span>
	}

	public String[] getNewBrandName() {
<span class="nc" id="L961">		return newBrandName;</span>
	}

	public String[] getNewInvDesc() {
<span class="nc" id="L965">		return newInvDesc;</span>
	}

	public String[] getNewInvName() {
<span class="nc" id="L969">		return newInvName;</span>
	}

	public String[] getNewModelDesc() {
<span class="nc" id="L973">		return newModelDesc;</span>
	}

	public String[] getNewModelName() {
<span class="nc" id="L977">		return newModelName;</span>
	}

	public String[] getNewModSpecDesc() {
<span class="nc" id="L981">		return newModSpecDesc;</span>
	}

	public int[] getNonConsBrandId() {
<span class="nc" id="L985">		return nonConsBrandId;</span>
	}

	public int[] getNonConsInvId() {
<span class="nc" id="L989">		return nonConsInvId;</span>
	}

	public int[] getNonConsModelId() {
<span class="nc" id="L993">		return nonConsModelId;</span>
	}

	public int getOrgId() {
<span class="nc" id="L997">		return orgId;</span>
	}

	public int getOwnerId() {
<span class="nc" id="L1001">		return ownerId;</span>
	}

	public String getOwnerType() {
<span class="nc" id="L1005">		return ownerType;</span>
	}

	public String getQuantity() {
<span class="nc" id="L1009">		return quantity;</span>
	}

	public String getRetInvDet() {
<span class="nc" id="L1013">		return retInvDet;</span>
	}

	public int getRetOrgId() {
<span class="nc" id="L1017">		return retOrgId;</span>
	}

	public String getSearchResultsAvailable() {
<span class="nc" id="L1021">		return searchResultsAvailable;</span>
	}

	public String[] getSerNo() {
<span class="nc" id="L1025">		return serNo;</span>
	}

	public String getSerNoFileName() {
<span class="nc" id="L1029">		return serNoFileName;</span>
	}

	public String getSign() {
<span class="nc" id="L1033">		return sign;</span>
	}

	public String[] getSpecType() {
<span class="nc" id="L1037">		return specType;</span>
	}

	public String[] getSpecUnit() {
<span class="nc" id="L1041">		return specUnit;</span>
	}

	public String[] getSpecValue() {
<span class="nc" id="L1045">		return specValue;</span>
	}

	public int getStart() {
<span class="nc" id="L1049">		return start;</span>
	}

	public String getTermId() {
<span class="nc" id="L1053">		return termId;</span>
	}

	public String nonConsInvUpload() throws LMSException {

<span class="nc" id="L1058">		session = request.getSession();</span>
<span class="nc" id="L1059">		UserInfoBean userInfo = null;</span>
<span class="nc" id="L1060">		UserInfoBean boUserBean = null;</span>
<span class="nc" id="L1061">		ConsNNonConsInvHelper helper = null;</span>
<span class="nc" id="L1062">		ArrayList arr = null;</span>
		// List&lt;Object&gt; returnedList = null;
<span class="nc" id="L1064">		HashSet&lt;String&gt; notAddedNos = null;</span>
		// String[] serNoArr = null;
		// Map&lt;String, HashSet&lt;String&gt;&gt; nos = null;
		// List&lt;String&gt; allNos = null;
<span class="nc" id="L1068">		Map&lt;String, InvDetailBean&gt; invMap = null;</span>
		// List&lt;Map&lt;String, InvDetailBean&gt;&gt; mapList =null;

		try {

<span class="nc bnc" id="L1073" title="All 6 branches missed.">			if (modelId == null &amp;&amp; &quot;&quot;.equals(modelId.trim()) || cost &lt;= 0) {</span>
<span class="nc" id="L1074">				addActionError(getText(&quot;msg.incorrect.detail.provide&quot;));</span>
<span class="nc" id="L1075">				return ERROR;</span>

			}
			// invMap = helper.fetchSerNoList(serNo,invCode,
			// serNoFileName,Integer.parseInt(bind_len),modelId);
			// mapList = helper.fetchInvMap(serNo,invCode,
			// serNoFileName,Integer.parseInt(modelId.split(&quot;-&quot;)[0]));
			// invMap = mapList.get(0);
			// duplicateInvMap =mapList.get(1);
			/*
			 * if(!duplicateInvMap.isEmpty()){
			 * fetchNonConsInvNModelSpecDetail();
			 * addActionError(&quot;Dupliate Serial Numbers Found !!&quot;); return ERROR;
			 * }
			 */
			// serNoArr = allNos.toArray(new String[allNos.size()]);
			// check for empty nos.
			/*
			 * if(invMap.size() == 0){ fetchNonConsInvNModelSpecDetail();
			 * addActionError(
			 * &quot;Please Provide atleast one serial Number throught interface or file.&quot;
			 * ); return ERROR; }
			 */
			// check for bindlen.
			/*
			 * for(int k = 0; k&lt;serNoArr.length; k++){ if(serNoArr[k].length() &lt;
			 * Integer.parseInt(bind_len)){ fetchNonConsInvNModelSpecDetail();
			 * addActionError
			 * (&quot;In uploaded file serial No. length must have atleast size of &quot;
			 * +bind_len); return ERROR; } }
			 */
			// check for duplicates.
			/*
			 * nos = helper.checkForDuplicates(allNos,
			 * Integer.parseInt(bind_len)); if(!nos.get(&quot;duplicate&quot;).isEmpty()){
			 * fetchNonConsInvNModelSpecDetail();
			 * addActionError(&quot;Dupliate Serial Numbers Found !!&quot;); return ERROR;
			 * }
			 */
			// serNoArr = nos.get(&quot;correct&quot;).toArray(new
			// String[nos.get(&quot;correct&quot;).size()]);
			// getValidSerialNoArr
			// duplicateInvMap = helper.getDuplicateInvetoryMap(invMap,
			// Integer.parseInt(bind_len),Integer.parseInt(modelId));

<span class="nc" id="L1120">			userInfo = (UserInfoBean) session.getAttribute(&quot;USER_INFO&quot;);</span>
<span class="nc" id="L1121">			boUserBean = new UserInfoBean();</span>
			// check added for Terminal Upload Restriction From BO
<span class="nc" id="L1123">			helper = new ConsNNonConsInvHelper();</span>
<span class="nc bnc" id="L1124" title="All 2 branches missed.">			if (userInfo.getUserType().equalsIgnoreCase(&quot;admin&quot;)) {</span>
<span class="nc" id="L1125">				OrgNUserRegHelper userhelper = new OrgNUserRegHelper();</span>
<span class="nc" id="L1126">				userhelper.changeUserBean(&quot;BO&quot;, boUserBean);</span>
<span class="nc" id="L1127">				arr = helper.nonConsInvUpload(serNo, invCode, serNoFileName,</span>
						Integer.parseInt(modelId.split(&quot;-&quot;)[0]), cost, isNew,
						invMap, boUserBean.getUserId(), boUserBean
								.getUserOrgId(), boUserBean.getUserType());
<span class="nc" id="L1131">			} else {</span>
<span class="nc" id="L1132">				arr = helper.nonConsInvUpload(serNo, invCode, serNoFileName,</span>
						Integer.parseInt(modelId.split(&quot;-&quot;)[0]), cost, isNew,
						invMap, userInfo.getUserId(), userInfo.getUserOrgId(),
						userInfo.getUserType());
			}

<span class="nc" id="L1138">			List&lt;String&gt; nwList = new ArrayList&lt;String&gt;();</span>
<span class="nc" id="L1139">			String notUploadedList = (String) arr.get(0);</span>
<span class="nc" id="L1140">			String emptySerialNoErr = (String) arr.get(1);</span>
<span class="nc" id="L1141">			String UploadList = (String) arr.get(2);</span>
			// List&lt;String&gt; dupSerialNoList =
			// Arrays.asList(returnedList.get(1).toString().split(&quot;;&quot;));
<span class="nc" id="L1144">			nwList.addAll(Arrays.asList(notUploadedList.split(&quot;;&quot;)));</span>
			// nwList.addAll(dupSerialNoList);
<span class="nc" id="L1146">			notAddedNos = new HashSet&lt;String&gt;(nwList);</span>

<span class="nc bnc" id="L1148" title="All 2 branches missed.">			if (emptySerialNoErr.indexOf(&quot;error&quot;) &gt;= 0) {</span>
<span class="nc" id="L1149">				fetchNonConsInvNModelSpecDetail();</span>
<span class="nc bnc" id="L1150" title="All 2 branches missed.">				if (notUploadedList.length() &gt; 0) {</span>
<span class="nc" id="L1151">					addActionError(&quot;'&quot; + notUploadedList</span>
							+ getText(&quot;msg.not.added.in.db.duplicate&quot;) + &quot; !!&quot;);
				}
<span class="nc" id="L1154">				return ERROR;</span>
<span class="nc bnc" id="L1155" title="All 2 branches missed.">			} else if (emptySerialNoErr.indexOf(&quot;fileError&quot;) &gt;= 0) {</span>
<span class="nc" id="L1156">				fetchNonConsInvNModelSpecDetail();</span>
<span class="nc" id="L1157">				addActionError(getText(&quot;msg.wrong.file.upload.correct.file&quot;)</span>
						+ &quot;.&quot;);
<span class="nc" id="L1159">				return ERROR;</span>
			} else {
<span class="nc" id="L1161">				session.setAttribute(&quot;INV_UPLOADED_LIST&quot;, UploadList);</span>
<span class="nc" id="L1162">				session.setAttribute(&quot;NOT_INV_UPLOADED_LIST&quot;, notAddedNos</span>
						.toString().replace(&quot;[&quot;, &quot;&quot;).replace(&quot;]&quot;, &quot;&quot;));
<span class="nc" id="L1164">				return SUCCESS;</span>
			}
<span class="nc" id="L1166">		} catch (LMSException e) {</span>
<span class="nc" id="L1167">			logger.error(&quot;LMSException: &quot;, e);</span>
<span class="nc" id="L1168">			fetchNonConsInvNModelSpecDetail();</span>
<span class="nc bnc" id="L1169" title="All 2 branches missed.">			if (e.getErrorCode() == 6001) {</span>
<span class="nc" id="L1170">				addActionError(getText(&quot;msg.in.upload.file.sr.len.atleast.size&quot;)</span>
						+ bind_len);
			} else {
<span class="nc" id="L1173">				addActionError(e.getErrorMessage());</span>
			}
<span class="nc" id="L1175">			return ERROR;</span>
<span class="nc" id="L1176">		} catch (Exception e) {</span>
<span class="nc" id="L1177">			logger.error(&quot;Exception: &quot; + e);</span>
<span class="nc" id="L1178">			e.printStackTrace();</span>
<span class="nc" id="L1179">			return ERROR;</span>
		}
	}

	public void setAddType(String addType) {
<span class="nc" id="L1184">		this.addType = addType;</span>
<span class="nc" id="L1185">	}</span>

	public void setAgtOrgId(int agtOrgId) {
<span class="nc" id="L1188">		this.agtOrgId = agtOrgId;</span>
<span class="nc" id="L1189">	}</span>

	public void setBrandId(int brandId) {
<span class="nc" id="L1192">		this.brandId = brandId;</span>
<span class="nc" id="L1193">	}</span>

	public void setBrandIdForModel(String[] brandIdForModel) {
<span class="nc" id="L1196">		this.brandIdForModel = brandIdForModel;</span>
<span class="nc" id="L1197">	}</span>

	public void setBrandsId(String brandsId) {
<span class="nc" id="L1200">		this.brandsId = brandsId;</span>
<span class="nc" id="L1201">	}</span>

	public void setConsAddType(String consAddType) {
<span class="nc" id="L1204">		this.consAddType = consAddType;</span>
<span class="nc" id="L1205">	}</span>

	public void setConsInvId(int[] consInvId) {
<span class="nc" id="L1208">		this.consInvId = consInvId;</span>
<span class="nc" id="L1209">	}</span>

	public void setConsModelId(int[] consModelId) {
<span class="nc" id="L1212">		this.consModelId = consModelId;</span>
<span class="nc" id="L1213">	}</span>

	public void setConsQty(int[] consQty) {
<span class="nc" id="L1216">		this.consQty = consQty;</span>
<span class="nc" id="L1217">	}</span>

	public void setCost(double cost) {
<span class="nc" id="L1220">		this.cost = cost;</span>
<span class="nc" id="L1221">	}</span>

	public void setCostPerUnit(double[] costPerUnit) {
<span class="nc" id="L1224">		this.costPerUnit = costPerUnit;</span>
<span class="nc" id="L1225">	}</span>

	public void setCount(Integer count) {
<span class="nc" id="L1228">		this.count = count;</span>
<span class="nc" id="L1229">	}</span>

	public void setEnd(String end) {
<span class="nc" id="L1232">		this.end = end;</span>
<span class="nc" id="L1233">	}</span>

	public void setInvId(int invId) {
<span class="nc" id="L1236">		this.invId = invId;</span>
<span class="nc" id="L1237">	}</span>

	public void setInvIdForBrand(int[] invIdForBrand) {
<span class="nc" id="L1240">		this.invIdForBrand = invIdForBrand;</span>
<span class="nc" id="L1241">	}</span>

	public void setInvIdForModel(int[] invIdForModel) {
<span class="nc" id="L1244">		this.invIdForModel = invIdForModel;</span>
<span class="nc" id="L1245">	}</span>

	public void setInvIdForModSpec(int[] invIdForModSpec) {
<span class="nc" id="L1248">		this.invIdForModSpec = invIdForModSpec;</span>
<span class="nc" id="L1249">	}</span>

	public void setInvImg(String[] invImg) {
<span class="nc" id="L1252">		this.invImg = invImg;</span>
<span class="nc" id="L1253">	}</span>

	public void setInvType(String invType) {
<span class="nc" id="L1256">		this.invType = invType;</span>
<span class="nc" id="L1257">	}</span>

	public void setIsNew(String isNew) {
<span class="nc" id="L1260">		this.isNew = isNew;</span>
<span class="nc" id="L1261">	}</span>

	public void setModelId(String modelId) {
<span class="nc" id="L1264">		this.modelId = modelId;</span>
<span class="nc" id="L1265">	}</span>

	public void setNewBrandDesc(String[] newBrandDesc) {
<span class="nc" id="L1268">		this.newBrandDesc = newBrandDesc;</span>
<span class="nc" id="L1269">	}</span>

	public void setNewBrandName(String[] newBrandName) {
<span class="nc" id="L1272">		this.newBrandName = newBrandName;</span>
<span class="nc" id="L1273">	}</span>

	public void setNewInvDesc(String[] newInvDesc) {
<span class="nc" id="L1276">		this.newInvDesc = newInvDesc;</span>
<span class="nc" id="L1277">	}</span>

	public void setNewInvName(String[] newInvName) {
<span class="nc" id="L1280">		this.newInvName = newInvName;</span>
<span class="nc" id="L1281">	}</span>

	public void setNewModelDesc(String[] newModelDesc) {
<span class="nc" id="L1284">		this.newModelDesc = newModelDesc;</span>
<span class="nc" id="L1285">	}</span>

	public void setNewModelName(String[] newModelName) {
<span class="nc" id="L1288">		this.newModelName = newModelName;</span>
<span class="nc" id="L1289">	}</span>

	public void setNewModSpecDesc(String[] newModSpecDesc) {
<span class="nc" id="L1292">		this.newModSpecDesc = newModSpecDesc;</span>
<span class="nc" id="L1293">	}</span>

	public void setNonConsBrandId(int[] nonConsBrandId) {
<span class="nc" id="L1296">		this.nonConsBrandId = nonConsBrandId;</span>
<span class="nc" id="L1297">	}</span>

	public void setNonConsInvId(int[] nonConsInvId) {
<span class="nc" id="L1300">		this.nonConsInvId = nonConsInvId;</span>
<span class="nc" id="L1301">	}</span>

	public void setNonConsModelId(int[] nonConsModelId) {
<span class="nc" id="L1304">		this.nonConsModelId = nonConsModelId;</span>
<span class="nc" id="L1305">	}</span>

	public void setOrgId(int orgId) {
<span class="nc" id="L1308">		this.orgId = orgId;</span>
<span class="nc" id="L1309">	}</span>

	public void setOwnerId(int ownerId) {
<span class="nc" id="L1312">		this.ownerId = ownerId;</span>
<span class="nc" id="L1313">	}</span>

	public void setOwnerType(String ownerType) {
<span class="nc" id="L1316">		this.ownerType = ownerType;</span>
<span class="nc" id="L1317">	}</span>

	public void setQuantity(String quantity) {
<span class="nc" id="L1320">		this.quantity = quantity;</span>
<span class="nc" id="L1321">	}</span>

	public void setRetInvDet(String retInvDet) {
<span class="nc" id="L1324">		this.retInvDet = retInvDet;</span>
<span class="nc" id="L1325">	}</span>

	public void setRetOrgId(int retOrgId) {
<span class="nc" id="L1328">		this.retOrgId = retOrgId;</span>
<span class="nc" id="L1329">	}</span>

	public void setSearchResultsAvailable(String searchResultsAvailable) {
<span class="nc" id="L1332">		this.searchResultsAvailable = searchResultsAvailable;</span>
<span class="nc" id="L1333">	}</span>

	public void setSerNo(String[] serNo) {
<span class="nc" id="L1336">		this.serNo = serNo;</span>
<span class="nc" id="L1337">	}</span>

	public void setSerNoFileName(String serNoFileName) {
<span class="nc" id="L1340">		this.serNoFileName = serNoFileName;</span>
<span class="nc" id="L1341">	}</span>

	public void setServletRequest(HttpServletRequest req) {
<span class="nc" id="L1344">		this.request = req;</span>
<span class="nc" id="L1345">	}</span>

	public void setServletResponse(HttpServletResponse res) {
<span class="nc" id="L1348">		this.response = res;</span>
<span class="nc" id="L1349">	}</span>

	public void setSign(String sign) {
<span class="nc" id="L1352">		this.sign = sign;</span>
<span class="nc" id="L1353">	}</span>

	public void setSpecType(String[] specType) {
<span class="nc" id="L1356">		this.specType = specType;</span>
<span class="nc" id="L1357">	}</span>

	public void setSpecUnit(String[] specUnit) {
<span class="nc" id="L1360">		this.specUnit = specUnit;</span>
<span class="nc" id="L1361">	}</span>

	public void setSpecValue(String[] specValue) {
<span class="nc" id="L1364">		this.specValue = specValue;</span>
<span class="nc" id="L1365">	}</span>

	public void setStart(int start) {
<span class="nc" id="L1368">		this.start = start;</span>
<span class="nc" id="L1369">	}</span>

	public void setTermId(String termId) {
<span class="nc" id="L1372">		this.termId = termId;</span>
<span class="nc" id="L1373">	}</span>

	public void verifyAssignInv() throws LMSException {
<span class="nc" id="L1376">		System.out.println(&quot;12233==========&quot;);</span>
<span class="nc" id="L1377">		System.out.println(&quot;verification===========ownerType = &quot; + ownerType</span>
				+ &quot;, agtOrgId = &quot; + agtOrgId + &quot;, retOrgId = &quot; + retOrgId
				+ &quot;\n nonConsInvId = &quot; + nonConsInvId + &quot;, nonConsModelId = &quot;
				+ nonConsModelId + &quot;, nonConsBrandId = &quot; + nonConsBrandId
				+ &quot;\n consInvId = &quot; + consInvId + &quot;, consModelId = &quot;
				+ consModelId + &quot;, consQty = &quot; + consQty + &quot;, sno = &quot; + serNo);

<span class="nc" id="L1384">		session = request.getSession();</span>
<span class="nc" id="L1385">		UserInfoBean userInfo = (UserInfoBean) session</span>
				.getAttribute(&quot;USER_INFO&quot;);
<span class="nc" id="L1387">		ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
<span class="nc" id="L1388">		String verifyConsNNonConsInv = helper.verifyConsNNonConsInv(userInfo</span>
				.getUserOrgId(), nonConsInvId, nonConsModelId, nonConsBrandId,
				serNo, consInvId, consModelId, consQty, userInfo.getUserType());
<span class="nc" id="L1391">		System.out.println(&quot;return res is    ========== &quot;</span>
				+ verifyConsNNonConsInv);
		try {
<span class="nc" id="L1394">			PrintWriter out = response.getWriter();</span>
<span class="nc" id="L1395">			out.print(verifyConsNNonConsInv);</span>
<span class="nc" id="L1396">		} catch (IOException e) {</span>
<span class="nc" id="L1397">			e.printStackTrace();</span>
<span class="nc" id="L1398">			new LMSException(getText(&quot;msg.exp.due.to.pw&quot;));</span>
<span class="nc" id="L1399">		}</span>

<span class="nc" id="L1401">	}</span>

	public void verifyReturnInv() throws LMSException {
<span class="nc" id="L1404">		System.out.println(&quot;verifyReturnInv==========&quot;);</span>
<span class="nc" id="L1405">		System.out.println(&quot;verification===========ownerType = &quot; + ownerType</span>
				+ &quot;, OrgId = &quot; + orgId + &quot;\n nonConsInvId = &quot; + nonConsInvId
				+ &quot;, nonConsModelId = &quot; + nonConsModelId
				+ &quot;, nonConsBrandId = &quot; + nonConsBrandId + &quot;\n consInvId = &quot;
				+ consInvId + &quot;, consModelId = &quot; + consModelId + &quot;, consQty = &quot;
				+ consQty + &quot;, sno = &quot; + serNo);

<span class="nc" id="L1412">		session = request.getSession();</span>
<span class="nc" id="L1413">		UserInfoBean userInfo = (UserInfoBean) session</span>
				.getAttribute(&quot;USER_INFO&quot;);

<span class="nc" id="L1416">		ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
<span class="nc" id="L1417">		String verifyConsNNonConsInv = helper.verifyConsNNonConsInv(orgId,</span>
				nonConsInvId, nonConsModelId, nonConsBrandId, serNo, consInvId,
				consModelId, consQty, userInfo.getUserType());
<span class="nc" id="L1420">		System.out.println(&quot;return res is    ========== &quot;</span>
				+ verifyConsNNonConsInv);
		try {
<span class="nc" id="L1423">			PrintWriter out = response.getWriter();</span>
<span class="nc" id="L1424">			out.print(verifyConsNNonConsInv);</span>
<span class="nc" id="L1425">		} catch (IOException e) {</span>
<span class="nc" id="L1426">			e.printStackTrace();</span>
<span class="nc" id="L1427">			new LMSException(getText(&quot;msg.exp.due.to.pw&quot;));</span>
<span class="nc" id="L1428">		}</span>
<span class="nc" id="L1429">	}</span>

	public String[] getIsReqOnReg() {
<span class="nc" id="L1432">		return isReqOnReg;</span>
	}

	public void setIsReqOnReg(String[] isReqOnReg) {
<span class="nc" id="L1436">		this.isReqOnReg = isReqOnReg;</span>
<span class="nc" id="L1437">	}</span>

	public String getOwnerName() {
<span class="nc" id="L1440">		return ownerName;</span>
	}

	public void setOwnerName(String ownerName) {
<span class="nc" id="L1444">		this.ownerName = ownerName;</span>
<span class="nc" id="L1445">	}</span>

	public String[] getCheckBindingLength() {
<span class="nc" id="L1448">		return checkBindingLength;</span>
	}

	public void setCheckBindingLength(String[] checkBindingLength) {
<span class="nc" id="L1452">		this.checkBindingLength = checkBindingLength;</span>
<span class="nc" id="L1453">	}</span>

	// Gaurav

	public List&lt;Object&gt; getValidSerialNoArr(String[] serNo, int bindingLength)
			throws LMSException {

		// session = request.getSession();

<span class="nc" id="L1462">		List&lt;String&gt; dbSerialNoList = null;</span>
<span class="nc" id="L1463">		Iterator&lt;String&gt; itr = null;</span>
<span class="nc" id="L1464">		String[] serialNoArr = null;</span>
<span class="nc" id="L1465">		String stringFromCompared = null;</span>
<span class="nc" id="L1466">		String stringToCompared = null;</span>
<span class="nc" id="L1467">		StringBuilder sb = new StringBuilder();</span>
<span class="nc" id="L1468">		ConsNNonConsInvHelper helper = new ConsNNonConsInvHelper();</span>
<span class="nc" id="L1469">		List&lt;String&gt; correctSerialNoList = new ArrayList&lt;String&gt;();</span>
<span class="nc" id="L1470">		List&lt;Object&gt; returnList = new ArrayList&lt;Object&gt;();</span>

		try {
<span class="nc" id="L1473">			dbSerialNoList = helper.fetchSerialNoList(modelId);</span>
<span class="nc" id="L1474">		} catch (Exception e) {</span>
<span class="nc" id="L1475">			logger.error(&quot;Exception : &quot; + e);</span>
<span class="nc" id="L1476">		}</span>

<span class="nc" id="L1478">		int flag = 0;</span>
<span class="nc bnc" id="L1479" title="All 2 branches missed.">		if (!(dbSerialNoList.isEmpty())) {</span>
<span class="nc bnc" id="L1480" title="All 2 branches missed.">			for (int i = 0; i &lt; serNo.length; i++) {</span>
<span class="nc bnc" id="L1481" title="All 2 branches missed.">				if (serNo[i].length() &gt; 0) {</span>
<span class="nc" id="L1482">					itr = dbSerialNoList.iterator();</span>
<span class="nc bnc" id="L1483" title="All 2 branches missed.">					while (itr.hasNext()) {</span>
<span class="nc" id="L1484">						stringFromCompared = null;</span>
<span class="nc" id="L1485">						stringToCompared = null;</span>
<span class="nc" id="L1486">						stringFromCompared = (itr.next()).toString();</span>
<span class="nc bnc" id="L1487" title="All 4 branches missed.">						if (bindingLength &gt; 0</span>
								&amp;&amp; stringFromCompared.length() &gt;= bindingLength) {
<span class="nc" id="L1489">							stringToCompared = serNo[i].substring(serNo[i]</span>
									.length()
									- bindingLength, serNo[i].length());
<span class="nc" id="L1492">							stringFromCompared = stringFromCompared</span>
									.substring(stringFromCompared.length()
											- bindingLength, stringFromCompared
											.length());
						} else {
<span class="nc" id="L1497">							stringToCompared = serNo[i];</span>
						}

<span class="nc bnc" id="L1500" title="All 2 branches missed.">						if (stringFromCompared.length() &gt;= bindingLength) {</span>
<span class="nc bnc" id="L1501" title="All 2 branches missed.">							if ((stringToCompared.toUpperCase())</span>
									.equals(stringFromCompared)) {
<span class="nc" id="L1503">								flag = 1;</span>
<span class="nc" id="L1504">								break;</span>
							} else {
<span class="nc" id="L1506">								flag = 0;</span>
							}
						} else {
<span class="nc" id="L1509">							flag = 0;</span>
						}
					}
				}
<span class="nc bnc" id="L1513" title="All 2 branches missed.">				if (flag == 1) {</span>
<span class="nc" id="L1514">					sb.append(serNo[i].trim() + &quot;;&quot;);</span>
				} else {
<span class="nc" id="L1516">					correctSerialNoList.add(serNo[i]);</span>
				}
			}
<span class="nc" id="L1519">			serialNoArr = correctSerialNoList</span>
					.toArray(new String[correctSerialNoList.size()]);
		} else {
<span class="nc" id="L1522">			serialNoArr = serNo;</span>
		}

<span class="nc" id="L1525">		returnList.add(0, serialNoArr);</span>
<span class="nc" id="L1526">		returnList.add(1, sb);</span>
		// logger.debug(returnList);
<span class="nc" id="L1528">		return returnList;</span>
	}

	public String[] getInvCode() {
<span class="nc" id="L1532">		return invCode;</span>
	}

	public void setInvCode(String[] invCode) {
<span class="nc" id="L1536">		this.invCode = invCode;</span>
<span class="nc" id="L1537">	}</span>

	public Map&lt;String, String&gt; getInvCodeMap() {
<span class="nc" id="L1540">		return invCodeMap;</span>
	}

	public void setInvCodeMap(Map&lt;String, String&gt; invCodeMap) {
<span class="nc" id="L1544">		this.invCodeMap = invCodeMap;</span>
<span class="nc" id="L1545">	}</span>

	public String getInvSrNo() {
<span class="nc" id="L1548">		return invSrNo;</span>
	}

	public void setInvSrNo(String invSrNo) {
<span class="nc" id="L1552">		this.invSrNo = invSrNo;</span>
<span class="nc" id="L1553">	}</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.7.201606060606</span></div></body></html>